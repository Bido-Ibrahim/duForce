import*as ct from"pixi.js";import{Viewport as Hs}from"pixi-viewport";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function xe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qs(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function so(t){let e,n,r;t.length!==2?(e=xe,n=(u,a)=>xe(t(u),a),r=(u,a)=>t(u)-a):(e=t===xe||t===qs?t:Ks,n=t,r=t);function i(u,a,c=0,f=u.length){if(c<f){if(e(a,a)!==0)return f;do{const l=c+f>>>1;n(u[l],a)<0?c=l+1:f=l}while(c<f)}return c}function o(u,a,c=0,f=u.length){if(c<f){if(e(a,a)!==0)return f;do{const l=c+f>>>1;n(u[l],a)<=0?c=l+1:f=l}while(c<f)}return c}function s(u,a,c=0,f=u.length){const l=i(u,a,c,f-1);return l>c&&r(u[l-1],a)>-r(u[l],a)?l-1:l}return{left:i,center:s,right:o}}function Ks(){return 0}function Ys(t){return t===null?NaN:+t}const Vs=so(xe),Xs=Vs.right;so(Ys).center;const Qs=Xs;function Js(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class fr extends Map{constructor(e,n=eu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(wi(this,e))}has(e){return super.has(wi(this,e))}set(e,n){return super.set(Zs(this,e),n)}delete(e){return super.delete(tu(this,e))}}function wi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Zs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function tu({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function eu(t){return t!==null&&typeof t=="object"?t.valueOf():t}function nu(t){return t}function ru(t,e,...n){return iu(t,nu,e,n)}function iu(t,e,n,r){return function i(o,s){if(s>=r.length)return n(o);const u=new fr,a=r[s++];let c=-1;for(const f of o){const l=a(f,++c,o),h=u.get(l);h?h.push(f):u.set(l,[f])}for(const[f,l]of u)u.set(f,i(l,s));return e(u)}(t,0)}function ou(t,e){return Array.from(e,n=>t[n])}function su(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,o)=>o);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,o)=>{for(const s of e){const u=hr(s[i],s[o]);if(u)return u}})):(n=t.map(n),r.sort((i,o)=>hr(n[i],n[o]))),ou(t,r)}return t.sort(uu(n))}function uu(t=xe){if(t===xe)return hr;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function hr(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const au=Math.sqrt(50),cu=Math.sqrt(10),fu=Math.sqrt(2);function _n(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=au?10:o>=cu?5:o>=fu?2:1;let u,a,c;return i<0?(c=Math.pow(10,-i)/s,u=Math.round(t*c),a=Math.round(e*c),u/c<t&&++u,a/c>e&&--a,c=-c):(c=Math.pow(10,i)*s,u=Math.round(t/c),a=Math.round(e/c),u*c<t&&++u,a*c>e&&--a),a<u&&.5<=n&&n<2?_n(t,e,n*2):[u,a,c]}function hu(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?_n(e,t,n):_n(t,e,n);if(!(o>=i))return[];const u=o-i+1,a=new Array(u);if(r)if(s<0)for(let c=0;c<u;++c)a[c]=(o-c)/-s;else for(let c=0;c<u;++c)a[c]=(o-c)*s;else if(s<0)for(let c=0;c<u;++c)a[c]=(i+c)/-s;else for(let c=0;c<u;++c)a[c]=(i+c)*s;return a}function lr(t,e,n){return e=+e,t=+t,n=+n,_n(t,e,n)[2]}function lu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?lr(e,t,n):lr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function du(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Rt(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}var pu={value:()=>{}};function Dr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mn(n)}function mn(t){this._=t}function gu(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mn.prototype=Dr.prototype={constructor:mn,on:function(t,e){var n=this._,r=gu(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=yu(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=vi(n[i],t.name,e);else if(e==null)for(i in n)n[i]=vi(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new mn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function yu(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function vi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=pu,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var dr="http://www.w3.org/1999/xhtml";const Ei={svg:"http://www.w3.org/2000/svg",xhtml:dr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function On(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ei.hasOwnProperty(e)?{space:Ei[e],local:t}:t}function mu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===dr&&e.documentElement.namespaceURI===dr?e.createElement(t):e.createElementNS(n,t)}}function wu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function uo(t){var e=On(t);return(e.local?wu:mu)(e)}function vu(){}function $r(t){return t==null?vu:function(){return this.querySelector(t)}}function Eu(t){typeof t!="function"&&(t=$r(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,u=r[i]=new Array(s),a,c,f=0;f<s;++f)(a=o[f])&&(c=t.call(a,a.__data__,f,o))&&("__data__"in a&&(c.__data__=a.__data__),u[f]=c);return new _t(r,this._parents)}function ao(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function _u(){return[]}function co(t){return t==null?_u:function(){return this.querySelectorAll(t)}}function bu(t){return function(){return ao(t.apply(this,arguments))}}function xu(t){typeof t=="function"?t=bu(t):t=co(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],u=s.length,a,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new _t(r,i)}function fo(t){return function(){return this.matches(t)}}function ho(t){return function(e){return e.matches(t)}}var Au=Array.prototype.find;function Su(t){return function(){return Au.call(this.children,t)}}function Mu(){return this.firstElementChild}function Nu(t){return this.select(t==null?Mu:Su(typeof t=="function"?t:ho(t)))}var ku=Array.prototype.filter;function Du(){return Array.from(this.children)}function $u(t){return function(){return ku.call(this.children,t)}}function Lu(t){return this.selectAll(t==null?Du:$u(typeof t=="function"?t:ho(t)))}function Gu(t){typeof t!="function"&&(t=fo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,u=r[i]=[],a,c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new _t(r,this._parents)}function lo(t){return new Array(t.length)}function Uu(){return new _t(this._enter||this._groups.map(lo),this._parents)}function bn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}bn.prototype={constructor:bn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Iu(t){return function(){return t}}function Cu(t,e,n,r,i,o){for(var s=0,u,a=e.length,c=o.length;s<c;++s)(u=e[s])?(u.__data__=o[s],r[s]=u):n[s]=new bn(t,o[s]);for(;s<a;++s)(u=e[s])&&(i[s]=u)}function Ou(t,e,n,r,i,o,s){var u,a,c=new Map,f=e.length,l=o.length,h=new Array(f),d;for(u=0;u<f;++u)(a=e[u])&&(h[u]=d=s.call(a,a.__data__,u,e)+"",c.has(d)?i[u]=a:c.set(d,a));for(u=0;u<l;++u)d=s.call(t,o[u],u,o)+"",(a=c.get(d))?(r[u]=a,a.__data__=o[u],c.delete(d)):n[u]=new bn(t,o[u]);for(u=0;u<f;++u)(a=e[u])&&c.get(h[u])===a&&(i[u]=a)}function Bu(t){return t.__data__}function Tu(t,e){if(!arguments.length)return Array.from(this,Bu);var n=e?Ou:Cu,r=this._parents,i=this._groups;typeof t!="function"&&(t=Iu(t));for(var o=i.length,s=new Array(o),u=new Array(o),a=new Array(o),c=0;c<o;++c){var f=r[c],l=i[c],h=l.length,d=Fu(t.call(f,f&&f.__data__,c,r)),g=d.length,p=u[c]=new Array(g),m=s[c]=new Array(g),w=a[c]=new Array(h);n(f,l,p,m,w,d,e);for(var E=0,k=0,x,O;E<g;++E)if(x=p[E]){for(E>=k&&(k=E+1);!(O=m[k])&&++k<g;);x._next=O||null}}return s=new _t(s,r),s._enter=u,s._exit=a,s}function Fu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ru(){return new _t(this._exit||this._groups.map(lo),this._parents)}function zu(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Pu(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),u=new Array(i),a=0;a<s;++a)for(var c=n[a],f=r[a],l=c.length,h=u[a]=new Array(l),d,g=0;g<l;++g)(d=c[g]||f[g])&&(h[g]=d);for(;a<i;++a)u[a]=n[a];return new _t(u,this._parents)}function ju(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Wu(t){t||(t=Hu);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],u=s.length,a=i[o]=new Array(u),c,f=0;f<u;++f)(c=s[f])&&(a[f]=c);a.sort(e)}return new _t(i,this._parents).order()}function Hu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function qu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ku(){return Array.from(this)}function Yu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Vu(){let t=0;for(const e of this)++t;return t}function Xu(){return!this.node()}function Qu(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,u;o<s;++o)(u=i[o])&&t.call(u,u.__data__,o,i);return this}function Ju(t){return function(){this.removeAttribute(t)}}function Zu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ta(t,e){return function(){this.setAttribute(t,e)}}function ea(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function na(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ra(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ia(t,e){var n=On(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Zu:Ju:typeof e=="function"?n.local?ra:na:n.local?ea:ta)(n,e))}function po(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function oa(t){return function(){this.style.removeProperty(t)}}function sa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ua(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function aa(t,e,n){return arguments.length>1?this.each((e==null?oa:typeof e=="function"?ua:sa)(t,e,n??"")):Me(this.node(),t)}function Me(t,e){return t.style.getPropertyValue(e)||po(t).getComputedStyle(t,null).getPropertyValue(e)}function ca(t){return function(){delete this[t]}}function fa(t,e){return function(){this[t]=e}}function ha(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function la(t,e){return arguments.length>1?this.each((e==null?ca:typeof e=="function"?ha:fa)(t,e)):this.node()[t]}function go(t){return t.trim().split(/^|\s+/)}function Lr(t){return t.classList||new yo(t)}function yo(t){this._node=t,this._names=go(t.getAttribute("class")||"")}yo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function mo(t,e){for(var n=Lr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function wo(t,e){for(var n=Lr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function da(t){return function(){mo(this,t)}}function pa(t){return function(){wo(this,t)}}function ga(t,e){return function(){(e.apply(this,arguments)?mo:wo)(this,t)}}function ya(t,e){var n=go(t+"");if(arguments.length<2){for(var r=Lr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ga:e?da:pa)(n,e))}function ma(){this.textContent=""}function wa(t){return function(){this.textContent=t}}function va(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ea(t){return arguments.length?this.each(t==null?ma:(typeof t=="function"?va:wa)(t)):this.node().textContent}function _a(){this.innerHTML=""}function ba(t){return function(){this.innerHTML=t}}function xa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Aa(t){return arguments.length?this.each(t==null?_a:(typeof t=="function"?xa:ba)(t)):this.node().innerHTML}function Sa(){this.nextSibling&&this.parentNode.appendChild(this)}function Ma(){return this.each(Sa)}function Na(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ka(){return this.each(Na)}function Da(t){var e=typeof t=="function"?t:uo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function $a(){return null}function La(t,e){var n=typeof t=="function"?t:uo(t),r=e==null?$a:typeof e=="function"?e:$r(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ga(){var t=this.parentNode;t&&t.removeChild(this)}function Ua(){return this.each(Ga)}function Ia(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ca(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Oa(t){return this.select(t?Ca:Ia)}function Ba(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ta(t){return function(e){t.call(this,e,this.__data__)}}function Fa(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ra(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function za(t,e,n){return function(){var r=this.__on,i,o=Ta(e);if(r){for(var s=0,u=r.length;s<u;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Pa(t,e,n){var r=Fa(t+""),i,o=r.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var a=0,c=u.length,f;a<c;++a)for(i=0,f=u[a];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(u=e?za:Ra,i=0;i<o;++i)this.each(u(r[i],e,n));return this}function vo(t,e,n){var r=po(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ja(t,e){return function(){return vo(this,t,e)}}function Wa(t,e){return function(){return vo(this,t,e.apply(this,arguments))}}function Ha(t,e){return this.each((typeof e=="function"?Wa:ja)(t,e))}function*qa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Gr=[null];function _t(t,e){this._groups=t,this._parents=e}function Qe(){return new _t([[document.documentElement]],Gr)}function Ka(){return this}_t.prototype=Qe.prototype={constructor:_t,select:Eu,selectAll:xu,selectChild:Nu,selectChildren:Lu,filter:Gu,data:Tu,enter:Uu,exit:Ru,join:zu,merge:Pu,selection:Ka,order:ju,sort:Wu,call:qu,nodes:Ku,node:Yu,size:Vu,empty:Xu,each:Qu,attr:ia,style:aa,property:la,classed:ya,text:Ea,html:Aa,raise:Ma,lower:ka,append:Da,insert:La,remove:Ua,clone:Oa,datum:Ba,on:Pa,dispatch:Ha,[Symbol.iterator]:qa};function it(t){return typeof t=="string"?new _t([[document.querySelector(t)]],[document.documentElement]):new _t([[t]],Gr)}function Zn(t){return typeof t=="string"?new _t([document.querySelectorAll(t)],[document.documentElement]):new _t([ao(t)],Gr)}function Ur(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Eo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Je(){}var Ke=.7,xn=1/Ke,Ae="\\s*([+-]?\\d+)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ya=/^#([0-9a-f]{3,8})$/,Va=new RegExp(`^rgb\\(${Ae},${Ae},${Ae}\\)$`),Xa=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),Qa=new RegExp(`^rgba\\(${Ae},${Ae},${Ae},${Ye}\\)$`),Ja=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${Ye}\\)$`),Za=new RegExp(`^hsl\\(${Ye},${Pt},${Pt}\\)$`),tc=new RegExp(`^hsla\\(${Ye},${Pt},${Pt},${Ye}\\)$`),_i={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ur(Je,de,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bi,formatHex:bi,formatHex8:ec,formatHsl:nc,formatRgb:xi,toString:xi});function bi(){return this.rgb().formatHex()}function ec(){return this.rgb().formatHex8()}function nc(){return _o(this).formatHsl()}function xi(){return this.rgb().formatRgb()}function de(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ya.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ai(e):n===3?new At(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Va.exec(t))?new At(e[1],e[2],e[3],1):(e=Xa.exec(t))?new At(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Qa.exec(t))?fn(e[1],e[2],e[3],e[4]):(e=Ja.exec(t))?fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Za.exec(t))?Ni(e[1],e[2]/100,e[3]/100,1):(e=tc.exec(t))?Ni(e[1],e[2]/100,e[3]/100,e[4]):_i.hasOwnProperty(t)?Ai(_i[t]):t==="transparent"?new At(NaN,NaN,NaN,0):null}function Ai(t){return new At(t>>16&255,t>>8&255,t&255,1)}function fn(t,e,n,r){return r<=0&&(t=e=n=NaN),new At(t,e,n,r)}function rc(t){return t instanceof Je||(t=de(t)),t?(t=t.rgb(),new At(t.r,t.g,t.b,t.opacity)):new At}function pr(t,e,n,r){return arguments.length===1?rc(t):new At(t,e,n,r??1)}function At(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ur(At,pr,Eo(Je,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ke:Math.pow(Ke,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new At(le(this.r),le(this.g),le(this.b),An(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Si,formatHex:Si,formatHex8:ic,formatRgb:Mi,toString:Mi}));function Si(){return`#${he(this.r)}${he(this.g)}${he(this.b)}`}function ic(){return`#${he(this.r)}${he(this.g)}${he(this.b)}${he((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mi(){const t=An(this.opacity);return`${t===1?"rgb(":"rgba("}${le(this.r)}, ${le(this.g)}, ${le(this.b)}${t===1?")":`, ${t})`}`}function An(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function le(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function he(t){return t=le(t),(t<16?"0":"")+t.toString(16)}function Ni(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new It(t,e,n,r)}function _o(t){if(t instanceof It)return new It(t.h,t.s,t.l,t.opacity);if(t instanceof Je||(t=de(t)),!t)return new It;if(t instanceof It)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,u=o-i,a=(o+i)/2;return u?(e===o?s=(n-r)/u+(n<r)*6:n===o?s=(r-e)/u+2:s=(e-n)/u+4,u/=a<.5?o+i:2-o-i,s*=60):u=a>0&&a<1?0:s,new It(s,u,a,t.opacity)}function oc(t,e,n,r){return arguments.length===1?_o(t):new It(t,e,n,r??1)}function It(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ur(It,oc,Eo(Je,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new It(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ke:Math.pow(Ke,t),new It(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new At(tr(t>=240?t-240:t+120,i,r),tr(t,i,r),tr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new It(ki(this.h),hn(this.s),hn(this.l),An(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=An(this.opacity);return`${t===1?"hsl(":"hsla("}${ki(this.h)}, ${hn(this.s)*100}%, ${hn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ki(t){return t=(t||0)%360,t<0?t+360:t}function hn(t){return Math.max(0,Math.min(1,t||0))}function tr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ir=t=>()=>t;function sc(t,e){return function(n){return t+n*e}}function uc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ac(t){return(t=+t)==1?bo:function(e,n){return n-e?uc(e,n,t):Ir(isNaN(e)?n:e)}}function bo(t,e){var n=e-t;return n?sc(t,n):Ir(isNaN(t)?e:t)}const Sn=function t(e){var n=ac(e);function r(i,o){var s=n((i=pr(i)).r,(o=pr(o)).r),u=n(i.g,o.g),a=n(i.b,o.b),c=bo(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=u(f),i.b=a(f),i.opacity=c(f),i+""}}return r.gamma=t,r}(1);function cc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function fc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hc(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Cr(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(u){for(s=0;s<r;++s)o[s]=i[s](u);return o}}function lc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dc(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Cr(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,er=new RegExp(gr.source,"g");function pc(t){return function(){return t}}function gc(t){return function(e){return t(e)+""}}function xo(t,e){var n=gr.lastIndex=er.lastIndex=0,r,i,o,s=-1,u=[],a=[];for(t=t+"",e=e+"";(r=gr.exec(t))&&(i=er.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),u[s]?u[s]+=o:u[++s]=o),(r=r[0])===(i=i[0])?u[s]?u[s]+=i:u[++s]=i:(u[++s]=null,a.push({i:s,x:Ut(r,i)})),n=er.lastIndex;return n<e.length&&(o=e.slice(n),u[s]?u[s]+=o:u[++s]=o),u.length<2?a[0]?gc(a[0].x):pc(e):(e=a.length,function(c){for(var f=0,l;f<e;++f)u[(l=a[f]).i]=l.x(c);return u.join("")})}function Cr(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ir(e):(n==="number"?Ut:n==="string"?(r=de(e))?(e=r,Sn):xo:e instanceof de?Sn:e instanceof Date?lc:fc(e)?cc:Array.isArray(e)?hc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dc:Ut)(t,e)}function yc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Di=180/Math.PI,yr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ao(t,e,n,r,i,o){var s,u,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*r)&&(n-=t*a,r-=e*a),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,a/=u),t*r<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Di,skewX:Math.atan(a)*Di,scaleX:s,scaleY:u}}var ln;function mc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?yr:Ao(e.a,e.b,e.c,e.d,e.e,e.f)}function wc(t){return t==null||(ln||(ln=document.createElementNS("http://www.w3.org/2000/svg","g")),ln.setAttribute("transform",t),!(t=ln.transform.baseVal.consolidate()))?yr:(t=t.matrix,Ao(t.a,t.b,t.c,t.d,t.e,t.f))}function So(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,f,l,h,d,g){if(c!==l||f!==h){var p=d.push("translate(",null,e,null,n);g.push({i:p-4,x:Ut(c,l)},{i:p-2,x:Ut(f,h)})}else(l||h)&&d.push("translate("+l+e+h+n)}function s(c,f,l,h){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),h.push({i:l.push(i(l)+"rotate(",null,r)-2,x:Ut(c,f)})):f&&l.push(i(l)+"rotate("+f+r)}function u(c,f,l,h){c!==f?h.push({i:l.push(i(l)+"skewX(",null,r)-2,x:Ut(c,f)}):f&&l.push(i(l)+"skewX("+f+r)}function a(c,f,l,h,d,g){if(c!==l||f!==h){var p=d.push(i(d)+"scale(",null,",",null,")");g.push({i:p-4,x:Ut(c,l)},{i:p-2,x:Ut(f,h)})}else(l!==1||h!==1)&&d.push(i(d)+"scale("+l+","+h+")")}return function(c,f){var l=[],h=[];return c=t(c),f=t(f),o(c.translateX,c.translateY,f.translateX,f.translateY,l,h),s(c.rotate,f.rotate,l,h),u(c.skewX,f.skewX,l,h),a(c.scaleX,c.scaleY,f.scaleX,f.scaleY,l,h),c=f=null,function(d){for(var g=-1,p=h.length,m;++g<p;)l[(m=h[g]).i]=m.x(d);return l.join("")}}}var vc=So(mc,"px, ","px)","deg)"),Ec=So(wc,", ",")",")"),Ne=0,We=0,Re=0,Mo=1e3,Mn,He,Nn=0,pe=0,Bn=0,Ve=typeof performance=="object"&&performance.now?performance:Date,No=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Or(){return pe||(No(_c),pe=Ve.now()+Bn)}function _c(){pe=0}function kn(){this._call=this._time=this._next=null}kn.prototype=Br.prototype={constructor:kn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Or():+n)+(e==null?0:+e),!this._next&&He!==this&&(He?He._next=this:Mn=this,He=this),this._call=t,this._time=n,mr()},stop:function(){this._call&&(this._call=null,this._time=1/0,mr())}};function Br(t,e,n){var r=new kn;return r.restart(t,e,n),r}function bc(){Or(),++Ne;for(var t=Mn,e;t;)(e=pe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ne}function $i(){pe=(Nn=Ve.now())+Bn,Ne=We=0;try{bc()}finally{Ne=0,Ac(),pe=0}}function xc(){var t=Ve.now(),e=t-Nn;e>Mo&&(Bn-=e,Nn=t)}function Ac(){for(var t,e=Mn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Mn=n);He=t,mr(r)}function mr(t){if(!Ne){We&&(We=clearTimeout(We));var e=t-pe;e>24?(t<1/0&&(We=setTimeout($i,t-Ve.now()-Bn)),Re&&(Re=clearInterval(Re))):(Re||(Nn=Ve.now(),Re=setInterval(xc,Mo)),Ne=1,No($i))}}function Li(t,e,n){var r=new kn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Sc=Dr("start","end","cancel","interrupt"),Mc=[],ko=0,Gi=1,wr=2,wn=3,Ui=4,vr=5,vn=6;function Tn(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Nc(t,n,{name:e,index:r,group:i,on:Sc,tween:Mc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ko})}function Tr(t,e){var n=Ct(t,e);if(n.state>ko)throw new Error("too late; already scheduled");return n}function Ht(t,e){var n=Ct(t,e);if(n.state>wn)throw new Error("too late; already running");return n}function Ct(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Nc(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Br(o,0,n.time);function o(c){n.state=Gi,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,l,h,d;if(n.state!==Gi)return a();for(f in r)if(d=r[f],d.name===n.name){if(d.state===wn)return Li(s);d.state===Ui?(d.state=vn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[f]):+f<e&&(d.state=vn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[f])}if(Li(function(){n.state===wn&&(n.state=Ui,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=wr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===wr){for(n.state=wn,i=new Array(h=n.tween.length),f=0,l=-1;f<h;++f)(d=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=d);i.length=l+1}}function u(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=vr,1),l=-1,h=i.length;++l<h;)i[l].call(t,f);n.state===vr&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=vn,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function kc(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>wr&&r.state<vr,r.state=vn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Dc(t){return this.each(function(){kc(this,t)})}function $c(t,e){var n,r;return function(){var i=Ht(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,u=r.length;s<u;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Lc(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ht(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var u={name:e,value:n},a=0,c=i.length;a<c;++a)if(i[a].name===e){i[a]=u;break}a===c&&i.push(u)}o.tween=i}}function Gc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ct(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?$c:Lc)(n,t,e))}function Fr(t,e,n){var r=t._id;return t.each(function(){var i=Ht(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ct(i,r).value[e]}}function Do(t,e){var n;return(typeof e=="number"?Ut:e instanceof de?Sn:(n=de(e))?(e=n,Sn):xo)(t,e)}function Uc(t){return function(){this.removeAttribute(t)}}function Ic(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cc(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Oc(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Bc(t,e,n){var r,i,o;return function(){var s,u=n(this),a;return u==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=u+"",s===a?null:s===r&&a===i?o:(i=a,o=e(r=s,u)))}}function Tc(t,e,n){var r,i,o;return function(){var s,u=n(this),a;return u==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=u+"",s===a?null:s===r&&a===i?o:(i=a,o=e(r=s,u)))}}function Fc(t,e){var n=On(t),r=n==="transform"?Ec:Do;return this.attrTween(t,typeof e=="function"?(n.local?Tc:Bc)(n,r,Fr(this,"attr."+t,e)):e==null?(n.local?Ic:Uc)(n):(n.local?Oc:Cc)(n,r,e))}function Rc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Pc(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&zc(t,o)),n}return i._value=e,i}function jc(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Rc(t,o)),n}return i._value=e,i}function Wc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=On(t);return this.tween(n,(r.local?Pc:jc)(r,e))}function Hc(t,e){return function(){Tr(this,t).delay=+e.apply(this,arguments)}}function qc(t,e){return e=+e,function(){Tr(this,t).delay=e}}function Kc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Hc:qc)(e,t)):Ct(this.node(),e).delay}function Yc(t,e){return function(){Ht(this,t).duration=+e.apply(this,arguments)}}function Vc(t,e){return e=+e,function(){Ht(this,t).duration=e}}function Xc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Yc:Vc)(e,t)):Ct(this.node(),e).duration}function Qc(t,e){if(typeof e!="function")throw new Error;return function(){Ht(this,t).ease=e}}function Jc(t){var e=this._id;return arguments.length?this.each(Qc(e,t)):Ct(this.node(),e).ease}function Zc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ht(this,t).ease=n}}function tf(t){if(typeof t!="function")throw new Error;return this.each(Zc(this._id,t))}function ef(t){typeof t!="function"&&(t=fo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,u=r[i]=[],a,c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new Jt(r,this._parents,this._name,this._id)}function nf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),u=0;u<o;++u)for(var a=e[u],c=n[u],f=a.length,l=s[u]=new Array(f),h,d=0;d<f;++d)(h=a[d]||c[d])&&(l[d]=h);for(;u<r;++u)s[u]=e[u];return new Jt(s,this._parents,this._name,this._id)}function rf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function of(t,e,n){var r,i,o=rf(e)?Tr:Ht;return function(){var s=o(this,t),u=s.on;u!==r&&(i=(r=u).copy()).on(e,n),s.on=i}}function sf(t,e){var n=this._id;return arguments.length<2?Ct(this.node(),n).on.on(t):this.each(of(n,t,e))}function uf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function af(){return this.on("end.remove",uf(this._id))}function cf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=$r(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var u=r[s],a=u.length,c=o[s]=new Array(a),f,l,h=0;h<a;++h)(f=u[h])&&(l=t.call(f,f.__data__,h,u))&&("__data__"in f&&(l.__data__=f.__data__),c[h]=l,Tn(c[h],e,n,h,c,Ct(f,n)));return new Jt(o,this._parents,e,n)}function ff(t){var e=this._name,n=this._id;typeof t!="function"&&(t=co(t));for(var r=this._groups,i=r.length,o=[],s=[],u=0;u<i;++u)for(var a=r[u],c=a.length,f,l=0;l<c;++l)if(f=a[l]){for(var h=t.call(f,f.__data__,l,a),d,g=Ct(f,n),p=0,m=h.length;p<m;++p)(d=h[p])&&Tn(d,e,n,p,h,g);o.push(h),s.push(f)}return new Jt(o,s,e,n)}var hf=Qe.prototype.constructor;function lf(){return new hf(this._groups,this._parents)}function df(t,e){var n,r,i;return function(){var o=Me(this,t),s=(this.style.removeProperty(t),Me(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function $o(t){return function(){this.style.removeProperty(t)}}function pf(t,e,n){var r,i=n+"",o;return function(){var s=Me(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function gf(t,e,n){var r,i,o;return function(){var s=Me(this,t),u=n(this),a=u+"";return u==null&&(a=u=(this.style.removeProperty(t),Me(this,t))),s===a?null:s===r&&a===i?o:(i=a,o=e(r=s,u))}}function yf(t,e){var n,r,i,o="style."+e,s="end."+o,u;return function(){var a=Ht(this,t),c=a.on,f=a.value[o]==null?u||(u=$o(e)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(s,i=f),a.on=r}}function mf(t,e,n){var r=(t+="")=="transform"?vc:Do;return e==null?this.styleTween(t,df(t,r)).on("end.style."+t,$o(t)):typeof e=="function"?this.styleTween(t,gf(t,r,Fr(this,"style."+t,e))).each(yf(this._id,t)):this.styleTween(t,pf(t,r,e),n).on("end.style."+t,null)}function wf(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function vf(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&wf(t,s,n)),r}return o._value=e,o}function Ef(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,vf(t,e,n??""))}function _f(t){return function(){this.textContent=t}}function bf(t){return function(){var e=t(this);this.textContent=e??""}}function xf(t){return this.tween("text",typeof t=="function"?bf(Fr(this,"text",t)):_f(t==null?"":t+""))}function Af(t){return function(e){this.textContent=t.call(this,e)}}function Sf(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Af(i)),e}return r._value=t,r}function Mf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Sf(t))}function Nf(){for(var t=this._name,e=this._id,n=Lo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],u=s.length,a,c=0;c<u;++c)if(a=s[c]){var f=Ct(a,e);Tn(a,t,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Jt(r,this._parents,t,n)}function kf(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var u={value:s},a={value:function(){--i===0&&o()}};n.each(function(){var c=Ht(this,r),f=c.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(a)),c.on=e}),i===0&&o()})}var Df=0;function Jt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Lo(){return++Df}var Xt=Qe.prototype;Jt.prototype={constructor:Jt,select:cf,selectAll:ff,selectChild:Xt.selectChild,selectChildren:Xt.selectChildren,filter:ef,merge:nf,selection:lf,transition:Nf,call:Xt.call,nodes:Xt.nodes,node:Xt.node,size:Xt.size,empty:Xt.empty,each:Xt.each,on:sf,attr:Fc,attrTween:Wc,style:mf,styleTween:Ef,text:xf,textTween:Mf,remove:af,tween:Gc,delay:Kc,duration:Xc,ease:Jc,easeVarying:tf,end:kf,[Symbol.iterator]:Xt[Symbol.iterator]};function $f(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Lf={time:null,delay:0,duration:250,ease:$f};function Gf(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Uf(t){var e,n;t instanceof Jt?(e=t._id,t=t._name):(e=Lo(),(n=Lf).time=Or(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],u=s.length,a,c=0;c<u;++c)(a=s[c])&&Tn(a,t,e,c,s,n||Gf(a,e));return new Jt(r,this._parents,t,e)}Qe.prototype.interrupt=Dc;Qe.prototype.transition=Uf;function If(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Go(this.cover(e,n),e,n,t)}function Go(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,s={data:r},u=t._x0,a=t._y0,c=t._x1,f=t._y1,l,h,d,g,p,m,w,E;if(!o)return t._root=s,t;for(;o.length;)if((p=e>=(l=(u+c)/2))?u=l:c=l,(m=n>=(h=(a+f)/2))?a=h:f=h,i=o,!(o=o[w=m<<1|p]))return i[w]=s,t;if(d=+t._x.call(null,o.data),g=+t._y.call(null,o.data),e===d&&n===g)return s.next=o,i?i[w]=s:t._root=s,t;do i=i?i[w]=new Array(4):t._root=new Array(4),(p=e>=(l=(u+c)/2))?u=l:c=l,(m=n>=(h=(a+f)/2))?a=h:f=h;while((w=m<<1|p)===(E=(g>=h)<<1|d>=l));return i[E]=o,i[w]=s,t}function Cf(t){var e,n,r=t.length,i,o,s=new Array(r),u=new Array(r),a=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,u[n]=o,i<a&&(a=i),i>f&&(f=i),o<c&&(c=o),o>l&&(l=o));if(a>f||c>l)return this;for(this.cover(a,c).cover(f,l),n=0;n<r;++n)Go(this,s[n],u[n],t[n]);return this}function Of(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s=i-n||1,u=this._root,a,c;n>t||t>=i||r>e||e>=o;)switch(c=(e<r)<<1|t<n,a=new Array(4),a[c]=u,u=a,s*=2,c){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Bf(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Tf(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function vt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Ff(t,e,n){var r,i=this._x0,o=this._y0,s,u,a,c,f=this._x1,l=this._y1,h=[],d=this._root,g,p;for(d&&h.push(new vt(d,i,o,f,l)),n==null?n=1/0:(i=t-n,o=e-n,f=t+n,l=e+n,n*=n);g=h.pop();)if(!(!(d=g.node)||(s=g.x0)>f||(u=g.y0)>l||(a=g.x1)<i||(c=g.y1)<o))if(d.length){var m=(s+a)/2,w=(u+c)/2;h.push(new vt(d[3],m,w,a,c),new vt(d[2],s,w,m,c),new vt(d[1],m,u,a,w),new vt(d[0],s,u,m,w)),(p=(e>=w)<<1|t>=m)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-p],h[h.length-1-p]=g)}else{var E=t-+this._x.call(null,d.data),k=e-+this._y.call(null,d.data),x=E*E+k*k;if(x<n){var O=Math.sqrt(n=x);i=t-O,o=e-O,f=t+O,l=e+O,r=d.data}}return r}function Rf(t){if(isNaN(f=+this._x.call(null,t))||isNaN(l=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,u=this._y0,a=this._x1,c=this._y1,f,l,h,d,g,p,m,w;if(!n)return this;if(n.length)for(;;){if((g=f>=(h=(s+a)/2))?s=h:a=h,(p=l>=(d=(u+c)/2))?u=d:c=d,e=n,!(n=n[m=p<<1|g]))return this;if(!n.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(r=e,w=m)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[m]=o:delete e[m],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[w]=n:this._root=n),this):(this._root=o,this)}function zf(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Pf(){return this._root}function jf(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Wf(t){var e=[],n,r=this._root,i,o,s,u,a;for(r&&e.push(new vt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.y0,u=n.x1,a=n.y1)&&r.length){var c=(o+u)/2,f=(s+a)/2;(i=r[3])&&e.push(new vt(i,c,f,u,a)),(i=r[2])&&e.push(new vt(i,o,f,c,a)),(i=r[1])&&e.push(new vt(i,c,s,u,f)),(i=r[0])&&e.push(new vt(i,o,s,c,f))}return this}function Hf(t){var e=[],n=[],r;for(this._root&&e.push(new vt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,u=r.y0,a=r.x1,c=r.y1,f=(s+a)/2,l=(u+c)/2;(o=i[0])&&e.push(new vt(o,s,u,f,l)),(o=i[1])&&e.push(new vt(o,f,u,a,l)),(o=i[2])&&e.push(new vt(o,s,l,f,c)),(o=i[3])&&e.push(new vt(o,f,l,a,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function qf(t){return t[0]}function Kf(t){return arguments.length?(this._x=t,this):this._x}function Yf(t){return t[1]}function Vf(t){return arguments.length?(this._y=t,this):this._y}function Rr(t,e,n){var r=new zr(e??qf,n??Yf,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function zr(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Ii(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var bt=Rr.prototype=zr.prototype;bt.copy=function(){var t=new zr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Ii(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Ii(r));return t};bt.add=If;bt.addAll=Cf;bt.cover=Of;bt.data=Bf;bt.extent=Tf;bt.find=Ff;bt.remove=Rf;bt.removeAll=zf;bt.root=Pf;bt.size=jf;bt.visit=Wf;bt.visitAfter=Hf;bt.x=Kf;bt.y=Vf;function Et(t){return function(){return t}}function re(t){return(t()-.5)*1e-6}function Xf(t){return t.x+t.vx}function Qf(t){return t.y+t.vy}function Jf(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=Et(t==null?1:+t));function s(){for(var c,f=e.length,l,h,d,g,p,m,w=0;w<o;++w)for(l=Rr(e,Xf,Qf).visitAfter(u),c=0;c<f;++c)h=e[c],p=n[h.index],m=p*p,d=h.x+h.vx,g=h.y+h.vy,l.visit(E);function E(k,x,O,nt,V){var Y=k.data,q=k.r,Q=p+q;if(Y){if(Y.index>h.index){var B=d-Y.x-Y.vx,W=g-Y.y-Y.vy,J=B*B+W*W;J<Q*Q&&(B===0&&(B=re(r),J+=B*B),W===0&&(W=re(r),J+=W*W),J=(Q-(J=Math.sqrt(J)))/J*i,h.vx+=(B*=J)*(Q=(q*=q)/(m+q)),h.vy+=(W*=J)*Q,Y.vx-=B*(Q=1-Q),Y.vy-=W*Q)}return}return x>d+Q||nt<d-Q||O>g+Q||V<g-Q}}function u(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function a(){if(e){var c,f=e.length,l;for(n=new Array(f),c=0;c<f;++c)l=e[c],n[l.index]=+t(l,c,e)}}return s.initialize=function(c,f){e=c,r=f,a()},s.iterations=function(c){return arguments.length?(o=+c,s):o},s.strength=function(c){return arguments.length?(i=+c,s):i},s.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Et(+c),a(),s):t},s}function Zf(t){return t.index}function Ci(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function th(t){var e=Zf,n=l,r,i=Et(30),o,s,u,a,c,f=1;t==null&&(t=[]);function l(m){return 1/Math.min(u[m.source.index],u[m.target.index])}function h(m){for(var w=0,E=t.length;w<f;++w)for(var k=0,x,O,nt,V,Y,q,Q;k<E;++k)x=t[k],O=x.source,nt=x.target,V=nt.x+nt.vx-O.x-O.vx||re(c),Y=nt.y+nt.vy-O.y-O.vy||re(c),q=Math.sqrt(V*V+Y*Y),q=(q-o[k])/q*m*r[k],V*=q,Y*=q,nt.vx-=V*(Q=a[k]),nt.vy-=Y*Q,O.vx+=V*(Q=1-Q),O.vy+=Y*Q}function d(){if(s){var m,w=s.length,E=t.length,k=new Map(s.map((O,nt)=>[e(O,nt,s),O])),x;for(m=0,u=new Array(w);m<E;++m)x=t[m],x.index=m,typeof x.source!="object"&&(x.source=Ci(k,x.source)),typeof x.target!="object"&&(x.target=Ci(k,x.target)),u[x.source.index]=(u[x.source.index]||0)+1,u[x.target.index]=(u[x.target.index]||0)+1;for(m=0,a=new Array(E);m<E;++m)x=t[m],a[m]=u[x.source.index]/(u[x.source.index]+u[x.target.index]);r=new Array(E),g(),o=new Array(E),p()}}function g(){if(s)for(var m=0,w=t.length;m<w;++m)r[m]=+n(t[m],m,t)}function p(){if(s)for(var m=0,w=t.length;m<w;++m)o[m]=+i(t[m],m,t)}return h.initialize=function(m,w){s=m,c=w,d()},h.links=function(m){return arguments.length?(t=m,d(),h):t},h.id=function(m){return arguments.length?(e=m,h):e},h.iterations=function(m){return arguments.length?(f=+m,h):f},h.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Et(+m),g(),h):n},h.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Et(+m),p(),h):i},h}const eh=1664525,nh=1013904223,Oi=4294967296;function rh(){let t=1;return()=>(t=(eh*t+nh)%Oi)/Oi}function ih(t){return t.x}function oh(t){return t.y}var sh=10,uh=Math.PI*(3-Math.sqrt(5));function ah(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,u=new Map,a=Br(l),c=Dr("tick","end"),f=rh();t==null&&(t=[]);function l(){h(),c.call("tick",e),n<r&&(a.stop(),c.call("end",e))}function h(p){var m,w=t.length,E;p===void 0&&(p=1);for(var k=0;k<p;++k)for(n+=(o-n)*i,u.forEach(function(x){x(n)}),m=0;m<w;++m)E=t[m],E.fx==null?E.x+=E.vx*=s:(E.x=E.fx,E.vx=0),E.fy==null?E.y+=E.vy*=s:(E.y=E.fy,E.vy=0);return e}function d(){for(var p=0,m=t.length,w;p<m;++p){if(w=t[p],w.index=p,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var E=sh*Math.sqrt(.5+p),k=p*uh;w.x=E*Math.cos(k),w.y=E*Math.sin(k)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function g(p){return p.initialize&&p.initialize(t,f),p}return d(),e={tick:h,restart:function(){return a.restart(l),e},stop:function(){return a.stop(),e},nodes:function(p){return arguments.length?(t=p,d(),u.forEach(g),e):t},alpha:function(p){return arguments.length?(n=+p,e):n},alphaMin:function(p){return arguments.length?(r=+p,e):r},alphaDecay:function(p){return arguments.length?(i=+p,e):+i},alphaTarget:function(p){return arguments.length?(o=+p,e):o},velocityDecay:function(p){return arguments.length?(s=1-p,e):1-s},randomSource:function(p){return arguments.length?(f=p,u.forEach(g),e):f},force:function(p,m){return arguments.length>1?(m==null?u.delete(p):u.set(p,g(m)),e):u.get(p)},find:function(p,m,w){var E=0,k=t.length,x,O,nt,V,Y;for(w==null?w=1/0:w*=w,E=0;E<k;++E)V=t[E],x=p-V.x,O=m-V.y,nt=x*x+O*O,nt<w&&(Y=V,w=nt);return Y},on:function(p,m){return arguments.length>1?(c.on(p,m),e):c.on(p)}}}function ch(){var t,e,n,r,i=Et(-30),o,s=1,u=1/0,a=.81;function c(d){var g,p=t.length,m=Rr(t,ih,oh).visitAfter(l);for(r=d,g=0;g<p;++g)e=t[g],m.visit(h)}function f(){if(t){var d,g=t.length,p;for(o=new Array(g),d=0;d<g;++d)p=t[d],o[p.index]=+i(p,d,t)}}function l(d){var g=0,p,m,w=0,E,k,x;if(d.length){for(E=k=x=0;x<4;++x)(p=d[x])&&(m=Math.abs(p.value))&&(g+=p.value,w+=m,E+=m*p.x,k+=m*p.y);d.x=E/w,d.y=k/w}else{p=d,p.x=p.data.x,p.y=p.data.y;do g+=o[p.data.index];while(p=p.next)}d.value=g}function h(d,g,p,m){if(!d.value)return!0;var w=d.x-e.x,E=d.y-e.y,k=m-g,x=w*w+E*E;if(k*k/a<x)return x<u&&(w===0&&(w=re(n),x+=w*w),E===0&&(E=re(n),x+=E*E),x<s&&(x=Math.sqrt(s*x)),e.vx+=w*d.value*r/x,e.vy+=E*d.value*r/x),!0;if(d.length||x>=u)return;(d.data!==e||d.next)&&(w===0&&(w=re(n),x+=w*w),E===0&&(E=re(n),x+=E*E),x<s&&(x=Math.sqrt(s*x)));do d.data!==e&&(k=o[d.data.index]*r/x,e.vx+=w*k,e.vy+=E*k);while(d=d.next)}return c.initialize=function(d,g){t=d,n=g,f()},c.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Et(+d),f(),c):i},c.distanceMin=function(d){return arguments.length?(s=d*d,c):Math.sqrt(s)},c.distanceMax=function(d){return arguments.length?(u=d*d,c):Math.sqrt(u)},c.theta=function(d){return arguments.length?(a=d*d,c):Math.sqrt(a)},c}function fh(t){var e=Et(.1),n,r,i;typeof t!="function"&&(t=Et(t==null?0:+t));function o(u){for(var a=0,c=n.length,f;a<c;++a)f=n[a],f.vx+=(i[a]-f.x)*r[a]*u}function s(){if(n){var u,a=n.length;for(r=new Array(a),i=new Array(a),u=0;u<a;++u)r[u]=isNaN(i[u]=+t(n[u],u,n))?0:+e(n[u],u,n)}}return o.initialize=function(u){n=u,s()},o.strength=function(u){return arguments.length?(e=typeof u=="function"?u:Et(+u),s(),o):e},o.x=function(u){return arguments.length?(t=typeof u=="function"?u:Et(+u),s(),o):t},o}function hh(t){var e=Et(.1),n,r,i;typeof t!="function"&&(t=Et(t==null?0:+t));function o(u){for(var a=0,c=n.length,f;a<c;++a)f=n[a],f.vy+=(i[a]-f.y)*r[a]*u}function s(){if(n){var u,a=n.length;for(r=new Array(a),i=new Array(a),u=0;u<a;++u)r[u]=isNaN(i[u]=+t(n[u],u,n))?0:+e(n[u],u,n)}}return o.initialize=function(u){n=u,s()},o.strength=function(u){return arguments.length?(e=typeof u=="function"?u:Et(+u),s(),o):e},o.y=function(u){return arguments.length?(t=typeof u=="function"?u:Et(+u),s(),o):t},o}function lh(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Dn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ke(t){return t=Dn(Math.abs(t)),t?t[1]:NaN}function dh(t,e){return function(n,r){for(var i=n.length,o=[],s=0,u=t[0],a=0;i>0&&u>0&&(a+u+1>r&&(u=Math.max(1,r-a)),o.push(n.substring(i-=u,i+u)),!((a+=u+1)>r));)u=t[s=(s+1)%t.length];return o.reverse().join(e)}}function ph(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var gh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $n(t){if(!(e=gh.exec(t)))throw new Error("invalid format: "+t);var e;return new Pr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$n.prototype=Pr.prototype;function Pr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Pr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yh(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Uo;function mh(t,e){var n=Dn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Uo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Dn(t,Math.max(0,e+o-1))[0]}function Bi(t,e){var n=Dn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ti={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:lh,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Bi(t*100,e),r:Bi,s:mh,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Fi(t){return t}var Ri=Array.prototype.map,zi=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wh(t){var e=t.grouping===void 0||t.thousands===void 0?Fi:dh(Ri.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Fi:ph(Ri.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",a=t.nan===void 0?"NaN":t.nan+"";function c(l){l=$n(l);var h=l.fill,d=l.align,g=l.sign,p=l.symbol,m=l.zero,w=l.width,E=l.comma,k=l.precision,x=l.trim,O=l.type;O==="n"?(E=!0,O="g"):Ti[O]||(k===void 0&&(k=12),x=!0,O="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var nt=p==="$"?n:p==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",V=p==="$"?r:/[%p]/.test(O)?s:"",Y=Ti[O],q=/[defgprs%]/.test(O);k=k===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function Q(B){var W=nt,J=V,rt,qt,ft;if(O==="c")J=Y(B)+J,B="";else{B=+B;var Mt=B<0||1/B<0;if(B=isNaN(B)?a:Y(Math.abs(B),k),x&&(B=yh(B)),Mt&&+B==0&&g!=="+"&&(Mt=!1),W=(Mt?g==="("?g:u:g==="-"||g==="("?"":g)+W,J=(O==="s"?zi[8+Uo/3]:"")+J+(Mt&&g==="("?")":""),q){for(rt=-1,qt=B.length;++rt<qt;)if(ft=B.charCodeAt(rt),48>ft||ft>57){J=(ft===46?i+B.slice(rt+1):B.slice(rt))+J,B=B.slice(0,rt);break}}}E&&!m&&(B=e(B,1/0));var Kt=W.length+B.length+J.length,ot=Kt<w?new Array(w-Kt+1).join(h):"";switch(E&&m&&(B=e(ot+B,ot.length?w-J.length:1/0),ot=""),d){case"<":B=W+B+J+ot;break;case"=":B=W+ot+B+J;break;case"^":B=ot.slice(0,Kt=ot.length>>1)+W+B+J+ot.slice(Kt);break;default:B=ot+W+B+J;break}return o(B)}return Q.toString=function(){return l+""},Q}function f(l,h){var d=c((l=$n(l),l.type="f",l)),g=Math.max(-8,Math.min(8,Math.floor(ke(h)/3)))*3,p=Math.pow(10,-g),m=zi[8+g/3];return function(w){return d(p*w)+m}}return{format:c,formatPrefix:f}}var dn,Io,Co;vh({thousands:",",grouping:[3],currency:["$",""]});function vh(t){return dn=wh(t),Io=dn.format,Co=dn.formatPrefix,dn}function Eh(t){return Math.max(0,-ke(Math.abs(t)))}function _h(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ke(e)/3)))*3-ke(Math.abs(t)))}function bh(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ke(e)-ke(t))+1}function xh(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Ah(){return this.eachAfter(xh)}function Sh(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Mh(t,e){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(t.call(e,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Nh(t,e){for(var n=this,r=[n],i=[],o,s,u,a=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,u=o.length;s<u;++s)r.push(o[s]);for(;n=i.pop();)t.call(e,n,++a,this);return this}function kh(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Dh(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function $h(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Lh(t){for(var e=this,n=Gh(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Gh(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Uh(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Ih(){return Array.from(this)}function Ch(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Oh(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Bh(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Oo(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Rh)):e===void 0&&(e=Fh);for(var n=new Xe(t),r,i=[n],o,s,u,a;r=i.pop();)if((s=e(r.data))&&(a=(s=Array.from(s)).length))for(r.children=s,u=a-1;u>=0;--u)i.push(o=s[u]=new Xe(s[u])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Bo)}function Th(){return Oo(this).eachBefore(zh)}function Fh(t){return t.children}function Rh(t){return Array.isArray(t)?t[1]:null}function zh(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Bo(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Xe(t){this.data=t,this.depth=this.height=0,this.parent=null}Xe.prototype=Oo.prototype={constructor:Xe,count:Ah,each:Sh,eachAfter:Nh,eachBefore:Mh,find:kh,sum:Dh,sort:$h,path:Lh,ancestors:Uh,descendants:Ih,leaves:Ch,links:Oh,copy:Th,[Symbol.iterator]:Bh};function nr(t){return t==null?null:Ph(t)}function Ph(t){if(typeof t!="function")throw new Error;return t}var jh={depth:-1},Pi={},rr={};function Wh(t){return t.id}function Hh(t){return t.parentId}function qh(){var t=Wh,e=Hh,n;function r(i){var o=Array.from(i),s=t,u=e,a,c,f,l,h,d,g,p,m=new Map;if(n!=null){const w=o.map((x,O)=>Kh(n(x,O,i))),E=w.map(ji),k=new Set(w).add("");for(const x of E)k.has(x)||(k.add(x),w.push(x),E.push(ji(x)),o.push(rr));s=(x,O)=>w[O],u=(x,O)=>E[O]}for(f=0,a=o.length;f<a;++f)c=o[f],d=o[f]=new Xe(c),(g=s(c,f,i))!=null&&(g+="")&&(p=d.id=g,m.set(p,m.has(p)?Pi:d)),(g=u(c,f,i))!=null&&(g+="")&&(d.parent=g);for(f=0;f<a;++f)if(d=o[f],g=d.parent){if(h=m.get(g),!h)throw new Error("missing: "+g);if(h===Pi)throw new Error("ambiguous: "+g);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(l)throw new Error("multiple roots");l=d}if(!l)throw new Error("no root");if(n!=null){for(;l.data===rr&&l.children.length===1;)l=l.children[0],--a;for(let w=o.length-1;w>=0&&(d=o[w],d.data===rr);--w)d.data=null}if(l.parent=jh,l.eachBefore(function(w){w.depth=w.parent.depth+1,--a}).eachBefore(Bo),l.parent=null,a>0)throw new Error("cycle");return l}return r.id=function(i){return arguments.length?(t=nr(i),r):t},r.parentId=function(i){return arguments.length?(e=nr(i),r):e},r.path=function(i){return arguments.length?(n=nr(i),r):n},r}function Kh(t){t=`${t}`;let e=t.length;return Er(t,e-1)&&!Er(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function ji(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Er(t,e););return t.slice(0,e)}function Er(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function To(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Wi=Symbol("implicit");function Fo(){var t=new fr,e=[],n=[],r=Wi;function i(o){let s=t.get(o);if(s===void 0){if(r!==Wi)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new fr;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Fo(e,n).unknown(r)},To.apply(i,arguments),i}function Yh(t){return function(){return t}}function Vh(t){return+t}var Hi=[0,1];function ie(t){return t}function _r(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yh(isNaN(e)?NaN:.5)}function Xh(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Qh(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=_r(i,r),o=n(s,o)):(r=_r(r,i),o=n(o,s)),function(u){return o(r(u))}}function Jh(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=_r(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(u){var a=Qs(t,u,1,r)-1;return o[a](i[a](u))}}function Zh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function tl(){var t=Hi,e=Hi,n=Cr,r,i,o,s=ie,u,a,c;function f(){var h=Math.min(t.length,e.length);return s!==ie&&(s=Xh(t[0],t[h-1])),u=h>2?Jh:Qh,a=c=null,l}function l(h){return h==null||isNaN(h=+h)?o:(a||(a=u(t.map(r),e,n)))(r(s(h)))}return l.invert=function(h){return s(i((c||(c=u(e,t.map(r),Ut)))(h)))},l.domain=function(h){return arguments.length?(t=Array.from(h,Vh),f()):t.slice()},l.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},l.rangeRound=function(h){return e=Array.from(h),n=yc,f()},l.clamp=function(h){return arguments.length?(s=h?!0:ie,f()):s!==ie},l.interpolate=function(h){return arguments.length?(n=h,f()):n},l.unknown=function(h){return arguments.length?(o=h,l):o},function(h,d){return r=h,i=d,f()}}function el(t,e,n,r){var i=lu(t,e,n),o;switch(r=$n(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=_h(i,s))&&(r.precision=o),Co(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=bh(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Eh(i))&&(r.precision=o-(r.type==="%")*2);break}}return Io(r)}function nl(t){var e=t.domain;return t.ticks=function(n){var r=e();return hu(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return el(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],u=r[o],a,c,f=10;for(u<s&&(c=s,s=u,u=c,c=i,i=o,o=c);f-- >0;){if(c=lr(s,u,n),c===a)return r[i]=s,r[o]=u,e(r);if(c>0)s=Math.floor(s/c)*c,u=Math.ceil(u/c)*c;else if(c<0)s=Math.ceil(s*c)/c,u=Math.floor(u*c)/c;else break;a=c}return t},t}function qi(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function rl(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function il(t){return t<0?-t*t:t*t}function ol(t){var e=t(ie,ie),n=1;function r(){return n===1?t(ie,ie):n===.5?t(rl,il):t(qi(n),qi(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},nl(e)}function Ro(){var t=ol(tl());return t.copy=function(){return Zh(t,Ro()).exponent(t.exponent())},To.apply(t,arguments),t}function sl(){return Ro.apply(null,arguments).exponent(.5)}function ul(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const al=ul("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function qe(t,e,n){this.k=t,this.x=e,this.y=n}qe.prototype={constructor:qe,scale:function(t){return t===1?this:new qe(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new qe(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};qe.prototype;function jr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wr={},Fn=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},$e={},Rn={};Rn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Rn.SYMBOL_SUPPORT=typeof Symbol<"u";var zo=Rn,cl=zo.ARRAY_BUFFER_SUPPORT,fl=zo.SYMBOL_SUPPORT,Hr=function(e,n){var r,i,o,s,u;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||cl&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(o=0,s=e.length;o<s;o++)n(e[o],o);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(fl&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,o=0;u=r.next(),u.done!==!0;)n(u.value,o),o++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},Po={};(function(t){var e=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,s=Math.pow(2,31)-1;t.getPointerArray=function(a){var c=a-1;if(c<=e)return Uint8Array;if(c<=n)return Uint16Array;if(c<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},t.getSignedPointerArray=function(a){var c=a-1;return c<=i?Int8Array:c<=o?Int16Array:c<=s?Int32Array:Float64Array},t.getNumberType=function(a){return a===(a|0)?Math.sign(a)===-1?a<=127&&a>=-128?Int8Array:a<=32767&&a>=-32768?Int16Array:Int32Array:a<=255?Uint8Array:a<=65535?Uint16Array:Uint32Array:Float64Array};var u={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(a,c){var f=null,l=0,h,d,g,p,m;for(p=0,m=a.length;p<m;p++)g=c?c(a[p]):a[p],d=t.getNumberType(g),h=u[d.name],h>l&&(l=h,f=d);return f},t.isTypedArray=function(a){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(a)},t.concat=function(){var a=0,c,f,l;for(c=0,l=arguments.length;c<l;c++)a+=arguments[c].length;var h=new arguments[0].constructor(a);for(c=0,f=0;c<l;c++)h.set(arguments[c],f),f+=arguments[c].length;return h},t.indices=function(a){for(var c=t.getPointerArray(a),f=new c(a),l=0;l<a;l++)f[l]=l;return f}})(Po);var jo=Hr,Wo=Po;function hl(t){return Array.isArray(t)||Wo.isTypedArray(t)}function qr(t){if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size}function ll(t){var e=qr(t),n=typeof e=="number"?new Array(e):[],r=0;return jo(t,function(i){n[r++]=i}),n}function dl(t){var e=qr(t),n=typeof e=="number"?Wo.getPointerArray(e):Array,r=typeof e=="number"?new Array(e):[],i=typeof e=="number"?new n(e):[],o=0;return jo(t,function(s){r[o]=s,i[o]=o++}),[r,i]}$e.isArrayLike=hl;$e.guessLength=qr;$e.toArray=ll;$e.toArrayWithIndices=dl;function Wt(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Wt.prototype[Symbol.iterator]=function(){return this});Wt.of=function(){var t=arguments,e=t.length,n=0;return new Wt(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Wt.empty=function(){var t=new Wt(function(){return{done:!0}});return t};Wt.fromSequence=function(t){var e=0,n=t.length;return new Wt(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Wt.is=function(t){return t instanceof Wt?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Ze=Wt;const Lt=jr(Ze);var ir=$e,Ho=Ze;function ut(t,e){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=t,this.capacity=e,this.items=new t(this.capacity),this.clear()}ut.prototype.clear=function(){this.start=0,this.size=0};ut.prototype.push=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var e=this.start+this.size;return e>=this.capacity&&(e-=this.capacity),this.items[e]=t,++this.size};ut.prototype.unshift=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var e=this.start-1;return this.start===0&&(e=this.capacity-1),this.items[e]=t,this.start=e,++this.size};ut.prototype.pop=function(){if(this.size!==0){this.size--;var t=this.start+this.size;return t>=this.capacity&&(t-=this.capacity),this.items[t]}};ut.prototype.shift=function(){if(this.size!==0){var t=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[t]}};ut.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};ut.prototype.peekLast=function(){if(this.size!==0){var t=this.start+this.size-1;return t>=this.capacity&&(t-=this.capacity),this.items[t]}};ut.prototype.get=function(t){if(!(this.size===0||t>=this.capacity))return t=this.start+t,t>=this.capacity&&(t-=this.capacity),this.items[t]};ut.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.capacity,r=this.size,i=this.start,o=0;o<r;)t.call(e,this.items[i],o,this),i++,o++,i===n&&(i=0)};ut.prototype.toArray=function(){var t=this.start+this.size;if(t<this.capacity)return this.items.slice(this.start,t);for(var e=new this.ArrayClass(this.size),n=this.capacity,r=this.size,i=this.start,o=0;o<r;)e[o]=this.items[i],i++,o++,i===n&&(i=0);return e};ut.prototype.values=function(){var t=this.items,e=this.capacity,n=this.size,r=this.start,i=0;return new Ho(function(){if(i>=n)return{done:!0};var o=t[r];return r++,i++,r===e&&(r=0),{value:o,done:!1}})};ut.prototype.entries=function(){var t=this.items,e=this.capacity,n=this.size,r=this.start,i=0;return new Ho(function(){if(i>=n)return{done:!0};var o=t[r];return r++,r===e&&(r=0),{value:[i++,o],done:!1}})};typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=ut.prototype.values);ut.prototype.inspect=function(){var t=this.toArray();return t.type=this.ArrayClass.name,t.capacity=this.capacity,Object.defineProperty(t,"constructor",{value:ut,enumerable:!1}),t};typeof Symbol<"u"&&(ut.prototype[Symbol.for("nodejs.util.inspect.custom")]=ut.prototype.inspect);ut.from=function(t,e,n){if(arguments.length<3&&(n=ir.guessLength(t),typeof n!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var r=new ut(e,n);if(ir.isArrayLike(t)){var i,o;for(i=0,o=t.length;i<o;i++)r.items[i]=t[i];return r.size=o,r}return ir.forEach(t,function(s){r.push(s)}),r};var pl=ut,gl=pl;function oe(t){this.graph=t,this.queue=new gl(Array,t.order),this.seen=new Set,this.size=0}oe.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order};oe.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size};oe.prototype.forEachNodeYetUnseen=function(t){var e=this.seen,n=this.graph;n.someNode(function(r,i){if(e.size===n.order)return!0;if(e.has(r))return!1;var o=t(r,i);return!!o})};oe.prototype.has=function(t){return this.seen.has(t)};oe.prototype.push=function(t){var e=this.seen.size;return this.seen.add(t),e===this.seen.size?!1:(this.queue.push(t),this.size++,!0)};oe.prototype.pushWith=function(t,e){var n=this.seen.size;return this.seen.add(t),n===this.seen.size?!1:(this.queue.push(e),this.size++,!0)};oe.prototype.shift=function(){var t=this.queue.shift();return this.size=this.queue.size,t};var yl=oe,Kr={};function ml(t,e,n){this.node=t,this.attributes=e,this.depth=n}function wl(t){return t[0].toUpperCase()+t.slice(1)}Kr.TraversalRecord=ml;Kr.capitalize=wl;var vl=Fn,El=yl,qo=Kr,Ki=qo.TraversalRecord,_l=qo.capitalize;function Ko(t,e,n,r){if(r=r||{},!vl(t))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if(typeof n!="function")throw new Error("graphology-traversal/bfs: given callback is not a function.");if(t.order===0)return;var i=new El(t),o=t["forEach"+_l(r.mode||"outbound")+"Neighbor"].bind(t),s;e===null?s=i.forEachNodeYetUnseen.bind(i):s=function(f){e=""+e,f(e,t.getNodeAttributes(e))};var u,a;function c(f,l){i.pushWith(f,new Ki(f,l,u.depth+1))}s(function(f,l){for(i.pushWith(f,new Ki(f,l,0));i.size!==0;)u=i.shift(),a=n(u.node,u.attributes,u.depth),a!==!0&&o(u.node,c)})}Wr.bfs=function(t,e,n){return Ko(t,null,e,n)};Wr.bfsFromNode=Ko;function ye(t){this.graph=t,this.stack=new Array(t.order),this.seen=new Set,this.size=0}ye.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order};ye.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size};ye.prototype.forEachNodeYetUnseen=function(t){var e=this.seen,n=this.graph;n.someNode(function(r,i){if(e.size===n.order)return!0;if(e.has(r))return!1;var o=t(r,i);return!!o})};ye.prototype.has=function(t){return this.seen.has(t)};ye.prototype.push=function(t){var e=this.seen.size;return this.seen.add(t),e===this.seen.size?!1:(this.stack[this.size++]=t,!0)};ye.prototype.pushWith=function(t,e){var n=this.seen.size;return this.seen.add(t),n===this.seen.size?!1:(this.stack[this.size++]=e,!0)};ye.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]};var bl=Wr,Yi=bl.bfsFromNode,Le={},Yo=Ze,xl=Hr;function at(){this.clear()}at.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};at.prototype.enqueue=function(t){return this.items.push(t),++this.size};at.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};at.prototype.peek=function(){if(this.size)return this.items[this.offset]};at.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};at.prototype.toArray=function(){return this.items.slice(this.offset)};at.prototype.values=function(){var t=this.items,e=this.offset;return new Yo(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};at.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new Yo(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(at.prototype[Symbol.iterator]=at.prototype.values);at.prototype.toString=function(){return this.toArray().join(",")};at.prototype.toJSON=function(){return this.toArray()};at.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:at,enumerable:!1}),t};typeof Symbol<"u"&&(at.prototype[Symbol.for("nodejs.util.inspect.custom")]=at.prototype.inspect);at.from=function(t){var e=new at;return xl(t,function(n){e.enqueue(n)}),e};at.of=function(){return at.from(arguments)};var Al=at,Sl=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var o=0;o<r;o++)e[i+o]=n[o]}},Yr=Fn,Ml=Al,Nl=Sl;function kl(t,e,n){if(!Yr(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),o={},s={};o[e]=null,s[n]=null;var u=[e],a=[n],c,f,l,h,d,g,p,m,w=!1;t:for(;u.length&&a.length;)if(u.length<=a.length){for(c=u,u=[],d=0,p=c.length;d<p;d++)for(f=c[d],l=i(f),g=0,m=l.length;g<m;g++)if(h=l[g],h in o||(u.push(h),o[h]=f),h in s){w=!0;break t}}else for(c=a,a=[],d=0,p=c.length;d<p;d++)for(f=c[d],l=r(f),g=0,m=l.length;g<m;g++)if(h=l[g],h in s||(a.push(h),s[h]=f),h in o){w=!0;break t}if(!w)return null;for(var E=[];h;)E.unshift(h),h=o[h];for(h=s[E[E.length-1]];h;)E.push(h),h=s[h];return E.length?E:null}function Dl(t,e){if(!Yr(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');e=""+e;var n={},r={},i,o,s,u,a,c;for(n[e]=!0,r[e]=[e];Object.keys(n).length;){i=n,n={};for(s in i)for(o=t.outboundNeighbors(s),a=0,c=o.length;a<c;a++)u=o[a],r[u]||(r[u]=r[s].concat(u),n[u]=!0)}return r}function Vo(t,e,n){if(!Yr(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},o=0;i[n]=0;for(var s=[n],u,a,c;s.length!==0;){var f=[];for(u=0,a=s.length;u<a;u++)c=s[u],!r.has(c)&&(r.add(c),Nl(f,e[t](c)),i[c]=o);o++,s=f}return i}var $l=Vo.bind(null,"outboundNeighbors"),Ll=Vo.bind(null,"neighbors");function Gl(t,e){e=""+e;var n=[],r={},i={},o=t.nodes(),s,u,a,c,f,l,h,d,g;for(l=0,d=o.length;l<d;l++)c=o[l],r[c]=[],i[c]=0;var p={};i[e]=1,p[e]=0;for(var m=Ml.of(e);m.size;)for(c=m.dequeue(),n.push(c),s=p[c],u=i[c],a=t.outboundNeighbors(c),h=0,g=a.length;h<g;h++)f=a[h],f in p||(m.enqueue(f),p[f]=s+1),p[f]===s+1&&(i[f]+=u,r[f].push(c));return[n,r,i]}Le.bidirectional=kl;Le.singleSource=Dl;Le.singleSourceLength=$l;Le.undirectedSingleSourceLength=Ll;Le.brandes=Gl;var zn={},tn={};function Ul(t){return typeof t!="number"||isNaN(t)?1:t}function Il(t,e){var n={},r=function(s){return typeof s>"u"?e:s};typeof e=="function"&&(r=e);var i=function(s){return r(s[t])},o=function(){return r(void 0)};return typeof t=="string"?(n.fromAttributes=i,n.fromGraph=function(s,u){return i(s.getNodeAttributes(u))},n.fromEntry=function(s,u){return i(u)}):typeof t=="function"?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},n.fromGraph=function(s,u){return r(t(u,s.getNodeAttributes(u)))},n.fromEntry=function(s,u){return r(t(s,u))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o),n}function Xo(t,e){var n={},r=function(s){return typeof s>"u"?e:s};typeof e=="function"&&(r=e);var i=function(s){return r(s[t])},o=function(){return r(void 0)};return typeof t=="string"?(n.fromAttributes=i,n.fromGraph=function(s,u){return i(s.getEdgeAttributes(u))},n.fromEntry=function(s,u){return i(u)},n.fromPartialEntry=n.fromEntry,n.fromMinimalEntry=n.fromEntry):typeof t=="function"?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},n.fromGraph=function(s,u){var a=s.extremities(u);return r(t(u,s.getEdgeAttributes(u),a[0],a[1],s.getNodeAttributes(a[0]),s.getNodeAttributes(a[1]),s.isUndirected(u)))},n.fromEntry=function(s,u,a,c,f,l,h){return r(t(s,u,a,c,f,l,h))},n.fromPartialEntry=function(s,u,a,c){return r(t(s,u,a,c))},n.fromMinimalEntry=function(s,u){return r(t(s,u))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o,n.fromMinimalEntry=o),n}tn.createNodeValueGetter=Il;tn.createEdgeValueGetter=Xo;tn.createEdgeWeightGetter=function(t){return Xo(t,Ul)};var en={},Cl=function(t,e){return t<e?-1:t>e?1:0},Ol=function(t,e){return t<e?1:t>e?-1:0};function Bl(t){return function(e,n){return t(n,e)}}function Tl(t){return t===2?function(e,n){return e[0]<n[0]?-1:e[0]>n[0]?1:e[1]<n[1]?-1:e[1]>n[1]?1:0}:function(e,n){for(var r=0;r<t;){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1;r++}return 0}}en.DEFAULT_COMPARATOR=Cl;en.DEFAULT_REVERSE_COMPARATOR=Ol;en.reverseComparator=Bl;en.createTupleComparator=Tl;var Ln=Hr,Qo=en,jt=$e,Pn=Qo.DEFAULT_COMPARATOR,Vr=Qo.reverseComparator;function Xr(t,e,n,r){for(var i=e[r],o,s;r>n;){if(o=r-1>>1,s=e[o],t(i,s)<0){e[r]=s,r=o;continue}break}e[r]=i}function nn(t,e,n){for(var r=e.length,i=n,o=e[n],s=2*n+1,u;s<r;)u=s+1,u<r&&t(e[s],e[u])>=0&&(s=u),e[n]=e[s],n=s,s=2*n+1;e[n]=o,Xr(t,e,i,n)}function Jo(t,e,n){e.push(n),Xr(t,e,0,e.length-1)}function Qr(t,e){var n=e.pop();if(e.length!==0){var r=e[0];return e[0]=n,nn(t,e,0),r}return n}function De(t,e,n){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var r=e[0];return e[0]=n,nn(t,e,0),r}function Zo(t,e,n){var r;return e.length!==0&&t(e[0],n)<0&&(r=e[0],e[0]=n,n=r,nn(t,e,0)),n}function ge(t,e){for(var n=e.length,r=n>>1,i=r;--i>=0;)nn(t,e,i)}function Jr(t,e){for(var n=e.length,r=0,i=new Array(n);r<n;)i[r++]=Qr(t,e);return i}function Fl(t,e,n){arguments.length===2&&(n=e,e=t,t=Pn);var r=Vr(t),i,o,s,u=1/0,a;if(e===1){if(jt.isArrayLike(n)){for(i=0,o=n.length;i<o;i++)s=n[i],(u===1/0||t(s,u)<0)&&(u=s);return a=new n.constructor(1),a[0]=u,a}return Ln(n,function(f){(u===1/0||t(f,u)<0)&&(u=f)}),[u]}if(jt.isArrayLike(n)){if(e>=n.length)return n.slice().sort(t);for(a=n.slice(0,e),ge(r,a),i=e,o=n.length;i<o;i++)r(n[i],a[0])>0&&De(r,a,n[i]);return a.sort(t)}var c=jt.guessLength(n);return c!==null&&c<e&&(e=c),a=new Array(e),i=0,Ln(n,function(f){i<e?a[i]=f:(i===e&&ge(r,a),r(f,a[0])>0&&De(r,a,f)),i++}),a.length>i&&(a.length=i),a.sort(t)}function Rl(t,e,n){arguments.length===2&&(n=e,e=t,t=Pn);var r=Vr(t),i,o,s,u=-1/0,a;if(e===1){if(jt.isArrayLike(n)){for(i=0,o=n.length;i<o;i++)s=n[i],(u===-1/0||t(s,u)>0)&&(u=s);return a=new n.constructor(1),a[0]=u,a}return Ln(n,function(f){(u===-1/0||t(f,u)>0)&&(u=f)}),[u]}if(jt.isArrayLike(n)){if(e>=n.length)return n.slice().sort(r);for(a=n.slice(0,e),ge(t,a),i=e,o=n.length;i<o;i++)t(n[i],a[0])>0&&De(t,a,n[i]);return a.sort(r)}var c=jt.guessLength(n);return c!==null&&c<e&&(e=c),a=new Array(e),i=0,Ln(n,function(f){i<e?a[i]=f:(i===e&&ge(t,a),t(f,a[0])>0&&De(t,a,f)),i++}),a.length>i&&(a.length=i),a.sort(r)}function Z(t){if(this.clear(),this.comparator=t||Pn,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}Z.prototype.clear=function(){this.items=[],this.size=0};Z.prototype.push=function(t){return Jo(this.comparator,this.items,t),++this.size};Z.prototype.peek=function(){return this.items[0]};Z.prototype.pop=function(){return this.size!==0&&this.size--,Qr(this.comparator,this.items)};Z.prototype.replace=function(t){return De(this.comparator,this.items,t)};Z.prototype.pushpop=function(t){return Zo(this.comparator,this.items,t)};Z.prototype.consume=function(){return this.size=0,Jr(this.comparator,this.items)};Z.prototype.toArray=function(){return Jr(this.comparator,this.items.slice())};Z.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Z,enumerable:!1}),t};typeof Symbol<"u"&&(Z.prototype[Symbol.for("nodejs.util.inspect.custom")]=Z.prototype.inspect);function Gn(t){if(this.clear(),this.comparator=t||Pn,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=Vr(this.comparator)}Gn.prototype=Z.prototype;Z.from=function(t,e){var n=new Z(e),r;return jt.isArrayLike(t)?r=t.slice():r=jt.toArray(t),ge(n.comparator,r),n.items=r,n.size=r.length,n};Gn.from=function(t,e){var n=new Gn(e),r;return jt.isArrayLike(t)?r=t.slice():r=jt.toArray(t),ge(n.comparator,r),n.items=r,n.size=r.length,n};Z.siftUp=nn;Z.siftDown=Xr;Z.push=Jo;Z.pop=Qr;Z.replace=De;Z.pushpop=Zo;Z.heapify=ge;Z.consume=Jr;Z.nsmallest=Fl;Z.nlargest=Rl;Z.MinHeap=Z;Z.MaxHeap=Gn;var ts=Z,es=Fn,Zr=tn.createEdgeWeightGetter,Un=ts,ti="weight";function br(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:0}function zl(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:t[3]>e[3]?1:t[3]<e[3]?-1:0}function Pl(t,e,n,r){if(e=""+e,n=""+n,!es(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(e&&!t.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" source node does not exist in the given graph.');if(n&&!t.hasNode(n))throw new Error('graphology-shortest-path/dijkstra: the "'+n+'" target node does not exist in the given graph.');if(r=Zr(r||ti).fromMinimalEntry,e===n)return[0,[e]];var i=[{},{}],o=[{},{}],s=[new Un(br),new Un(br)],u=[{},{}];o[0][e]=[e],o[1][n]=[n],u[0][e]=0,u[1][n]=0;var a=[],c=1/0,f=0,l=1,h,d,g,p,m,w,E,k,x;for(s[0].push([0,f++,e]),s[1].push([0,f++,n]);s[0].size&&s[1].size;)if(l=1-l,h=s[l].pop(),p=h[0],m=h[2],!(m in i[l])){if(i[l][m]=p,m in i[1-l])return[c,a];for(d=l===1?t.inboundEdges(m):t.outboundEdges(m),k=0,x=d.length;k<x;k++){if(E=d[k],w=t.opposite(m,E),g=i[l][m]+r(E,t.getEdgeAttributes(E)),w in i[l]&&g<i[l][w])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(w in u[l])||g<u[l][w])&&(u[l][w]=g,s[l].push([g,f++,w]),o[l][w]=o[l][m].concat(w),w in u[0]&&w in u[1]&&(p=u[0][w]+u[1][w],(a.length===0||c>p)&&(c=p,a=o[0][w].concat(o[1][w].slice(0,-1).reverse()))))}}return[1/0,null]}function jl(t,e,n,r,i,o){if(!es(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(i&&!t.hasNode(i))throw new Error('graphology-shortest-path/dijkstra: the "'+i+'" target node does not exist in the given graph.');n=Zr(n||ti).fromMinimalEntry;var s={},u={},a=new Un(br),c=0,f,l,h,d,g,p,m,w,E,k,x;for(w=0,k=e.length;w<k;w++)d=e[w],u[d]=0,a.push([0,c++,d]),o&&(o[d]=[d]);for(;a.size;)if(l=a.pop(),m=l[0],d=l[2],!(d in s)){if(s[d]=m,d===i)break;for(f=t.outboundEdges(d),E=0,x=f.length;E<x;E++)if(p=f[E],g=t.opposite(d,p),h=n(p,t.getEdgeAttributes(p))+s[d],!(r&&h>r)){if(g in s&&h<s[g])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(g in u)||h<u[g])&&(u[g]=h,a.push([h,c++,g]),o&&(o[g]=o[d].concat(g)))}}return s}function Wl(t,e,n){var r={};return jl(t,[e],n,0,null,r),r}function Hl(t,e,n,r){return Pl(t,e,n,r)[1]}function ql(t,e,n){e=""+e,n=Zr(n||ti).fromMinimalEntry;var r=[],i={},o={},s=t.nodes(),u,a,c,f,l,h,d,g,p,m;for(p=0,m=s.length;p<m;p++)h=s[p],i[h]=[],o[h]=0;var w={};o[e]=1;var E={};E[e]=0;var k=0,x=new Un(zl);for(x.push([0,k++,e,e]);x.size;)if(a=x.pop(),f=a[0],c=a[2],h=a[3],!(h in w))for(o[h]+=o[c],r.push(h),w[h]=f,u=t.outboundEdges(h),p=0,m=u.length;p<m;p++)g=u[p],d=t.opposite(h,g),l=f+n(g,t.getEdgeAttributes(g)),!(d in w)&&(!(d in E)||l<E[d])?(E[d]=l,x.push([l,k++,h,d]),o[d]=0,i[d]=[h]):l===E[d]&&(o[d]+=o[h],i[d].push(h));return[r,i,o]}zn.bidirectional=Hl;zn.singleSource=Wl;zn.brandes=ql;var Kl={},Yl=Fn,Vl=tn.createEdgeWeightGetter,Xl=ts,Ql="weight";function Jl(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:0}function Zl(t,e,n,r,i,o){if(!Yl(t))throw new Error("graphology-shortest-path/astar: invalid graphology instance.");if(e&&!t.hasNode(e))throw new Error('graphology-shortest-path/astar: the "'+e+'" source node does not exist in the given graph.');if(n&&!t.hasNode(n))throw new Error('graphology-shortest-path/astar: the "'+n+'" target node does not exist in the given graph.');if(r=Vl(r||Ql).fromMinimalEntry,e===n)return[e];i=i||function(){return 0},o=o||{};var s=0,u=new Xl(Jl);u.push([0,s++,e,0,null]);var a={},c={},f,l,h,d,g,p,m,w,E,k,x,O;function nt(V,Y,q,Q){if(O=l===q?Q:q,k=r(V,Y),k!==null){if(x=d+k,a.hasOwnProperty(O)){if(h=a[O],w=h[0],E=h[1],w<=x)return}else E=i(O,n);o.cutoff&&x+E>o.cutoff||(a[O]=[x,E],u.push([x+E,s++,O,x,l]))}}for(;u.size!==0;){if(f=u.pop(),l=f[2],d=f[3],g=f[4],l===n){for(p=[l],m=g;m!==null;)p.push(m),m=c[m];return p.reverse(),p}c.hasOwnProperty(l)&&(c[l]===null||(w=a[l][0],w<d))||(c[l]=g,t.forEachOutboundEdge(l,nt))}return null}Kl.bidirectional=Zl;var rn=Le,td=zn;rn.bidirectional;rn.singleSource;rn.singleSourceLength;rn.undirectedSingleSourceLength;rn.brandes;var ei={exports:{}},Se=typeof Reflect=="object"?Reflect:null,Vi=Se&&typeof Se.apply=="function"?Se.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},En;Se&&typeof Se.ownKeys=="function"?En=Se.ownKeys:Object.getOwnPropertySymbols?En=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:En=function(e){return Object.getOwnPropertyNames(e)};function ed(t){console&&console.warn&&console.warn(t)}var ns=Number.isNaN||function(e){return e!==e};function tt(){tt.init.call(this)}ei.exports=tt;ei.exports.once=od;tt.EventEmitter=tt;tt.prototype._events=void 0;tt.prototype._eventsCount=0;tt.prototype._maxListeners=void 0;var Xi=10;function jn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(tt,"defaultMaxListeners",{enumerable:!0,get:function(){return Xi},set:function(t){if(typeof t!="number"||t<0||ns(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Xi=t}});tt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ns(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function rs(t){return t._maxListeners===void 0?tt.defaultMaxListeners:t._maxListeners}tt.prototype.getMaxListeners=function(){return rs(this)};tt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var a=o[e];if(a===void 0)return!1;if(typeof a=="function")Vi(a,this,n);else for(var c=a.length,f=as(a,c),r=0;r<c;++r)Vi(f[r],this,n);return!0};function is(t,e,n,r){var i,o,s;if(jn(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=rs(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,ed(u)}return t}tt.prototype.addListener=function(e,n){return is(this,e,n,!1)};tt.prototype.on=tt.prototype.addListener;tt.prototype.prependListener=function(e,n){return is(this,e,n,!0)};function nd(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function os(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=nd.bind(r);return i.listener=n,r.wrapFn=i,i}tt.prototype.once=function(e,n){return jn(n),this.on(e,os(this,e,n)),this};tt.prototype.prependOnceListener=function(e,n){return jn(n),this.prependListener(e,os(this,e,n)),this};tt.prototype.removeListener=function(e,n){var r,i,o,s,u;if(jn(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){u=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():rd(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||n)}return this};tt.prototype.off=tt.prototype.removeListener;tt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function ss(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?id(i):as(i,i.length)}tt.prototype.listeners=function(e){return ss(this,e,!0)};tt.prototype.rawListeners=function(e){return ss(this,e,!1)};tt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):us.call(t,e)};tt.prototype.listenerCount=us;function us(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}tt.prototype.eventNames=function(){return this._eventsCount>0?En(this._events):[]};function as(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function rd(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function id(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function od(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}cs(t,e,o,{once:!0}),e!=="error"&&sd(t,i,{once:!0})})}function sd(t,e,n){typeof t.on=="function"&&cs(t,"error",e,n)}function cs(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ud=ei.exports,ad=Ze,fs=Rn,cd=fs.ARRAY_BUFFER_SUPPORT,fd=fs.SYMBOL_SUPPORT;function hd(t){return typeof t=="string"||Array.isArray(t)||cd&&ArrayBuffer.isView(t)?ad.fromSequence(t):typeof t!="object"||t===null?null:fd&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var hs=function(e){var n=hd(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},ld=hs,dd=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],o,s=0,u=ld(e);;){if(s===r)return i;if(o=u.next(),o.done)return s!==n&&(i.length=s),i;i[s++]=o.value}};const ls=jr(dd);var pd=Ze,gd=hs,yd=function(){var e=arguments,n=null,r=-1;return new pd(function(){var o=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=gd(e[r])}if(o=n.next(),o.done===!0){n=null;continue}break}while(!0);return o})};const Qt=jr(yd);function md(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let lt=md;typeof Object.assign=="function"&&(lt=Object.assign);function $t(t,e,n,r){const i=t._nodes.get(e);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?o=i.out&&i.out[n]:o=i.undirected&&i.undirected[n]),o}function pt(t){return typeof t=="object"&&t!==null}function ds(t){let e;for(e in t)return!1;return!0}function Dt(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Gt(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function Qi(t){return!(!pt(t)||t.attributes&&!Array.isArray(t.attributes))}function wd(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class ni extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class G extends ni{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,G.prototype.constructor)}}class N extends ni{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,N.prototype.constructor)}}class T extends ni{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,T.prototype.constructor)}}function ps(t,e){this.key=t,this.attributes=e,this.clear()}ps.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function gs(t,e){this.key=t,this.attributes=e,this.clear()}gs.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function ys(t,e){this.key=t,this.attributes=e,this.clear()}ys.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ge(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Ge.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Ge.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[e][n]=this};Ge.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Ge.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const ms=0,ws=1,vd=2,vs=3;function te(t,e,n,r,i,o,s){let u,a,c,f;if(r=""+r,n===ms){if(u=t._nodes.get(r),!u)throw new N(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,f=o}else if(n===vs){if(i=""+i,a=t._edges.get(i),!a)throw new N(`Graph.${e}: could not find the "${i}" edge in the graph.`);const l=a.source.key,h=a.target.key;if(r===l)u=a.target;else if(r===h)u=a.source;else throw new N(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${l}, ${h}).`);c=o,f=s}else{if(a=t._edges.get(r),!a)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===ws?u=a.source:u=a.target,c=i,f=o}return[u,c,f]}function Ed(t,e,n){t.prototype[e]=function(r,i,o){const[s,u]=te(this,e,n,r,i,o);return s.attributes[u]}}function _d(t,e,n){t.prototype[e]=function(r,i){const[o]=te(this,e,n,r,i);return o.attributes}}function bd(t,e,n){t.prototype[e]=function(r,i,o){const[s,u]=te(this,e,n,r,i,o);return s.attributes.hasOwnProperty(u)}}function xd(t,e,n){t.prototype[e]=function(r,i,o,s){const[u,a,c]=te(this,e,n,r,i,o,s);return u.attributes[a]=c,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:a}),this}}function Ad(t,e,n){t.prototype[e]=function(r,i,o,s){const[u,a,c]=te(this,e,n,r,i,o,s);if(typeof c!="function")throw new G(`Graph.${e}: updater should be a function.`);const f=u.attributes,l=c(f[a]);return f[a]=l,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:a}),this}}function Sd(t,e,n){t.prototype[e]=function(r,i,o){const[s,u]=te(this,e,n,r,i,o);return delete s.attributes[u],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:u}),this}}function Md(t,e,n){t.prototype[e]=function(r,i,o){const[s,u]=te(this,e,n,r,i,o);if(!pt(u))throw new G(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Nd(t,e,n){t.prototype[e]=function(r,i,o){const[s,u]=te(this,e,n,r,i,o);if(!pt(u))throw new G(`Graph.${e}: provided attributes are not a plain object.`);return lt(s.attributes,u),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:u}),this}}function kd(t,e,n){t.prototype[e]=function(r,i,o){const[s,u]=te(this,e,n,r,i,o);if(typeof u!="function")throw new G(`Graph.${e}: provided updater is not a function.`);return s.attributes=u(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Dd=[{name:t=>`get${t}Attribute`,attacher:Ed},{name:t=>`get${t}Attributes`,attacher:_d},{name:t=>`has${t}Attribute`,attacher:bd},{name:t=>`set${t}Attribute`,attacher:xd},{name:t=>`update${t}Attribute`,attacher:Ad},{name:t=>`remove${t}Attribute`,attacher:Sd},{name:t=>`replace${t}Attributes`,attacher:Md},{name:t=>`merge${t}Attributes`,attacher:Nd},{name:t=>`update${t}Attributes`,attacher:kd}];function $d(t){Dd.forEach(function({name:e,attacher:n}){n(t,e("Node"),ms),n(t,e("Source"),ws),n(t,e("Target"),vd),n(t,e("Opposite"),vs)})}function Ld(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=$t(this,s,u,n),!o)throw new N(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function Gd(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+arguments[1];if(i=$t(this,o,s,n),!i)throw new N(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function Ud(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=$t(this,s,u,n),!o)throw new N(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function Id(t,e,n){t.prototype[e]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,a=""+i;if(i=arguments[2],o=arguments[3],s=$t(this,u,a,n),!s)throw new N(`Graph.${e}: could not find an edge for the given path ("${u}" - "${a}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function Cd(t,e,n){t.prototype[e]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,a=""+i;if(i=arguments[2],o=arguments[3],s=$t(this,u,a,n),!s)throw new N(`Graph.${e}: could not find an edge for the given path ("${u}" - "${a}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new G(`Graph.${e}: updater should be a function.`);return s.attributes[i]=o(s.attributes[i]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function Od(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=$t(this,s,u,n),!o)throw new N(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function Bd(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=$t(this,s,u,n),!o)throw new N(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!pt(i))throw new G(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Td(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=$t(this,s,u,n),!o)throw new N(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!pt(i))throw new G(`Graph.${e}: provided attributes are not a plain object.`);return lt(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function Fd(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new T(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=$t(this,s,u,n),!o)throw new N(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new T(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new N(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new G(`Graph.${e}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Rd=[{name:t=>`get${t}Attribute`,attacher:Ld},{name:t=>`get${t}Attributes`,attacher:Gd},{name:t=>`has${t}Attribute`,attacher:Ud},{name:t=>`set${t}Attribute`,attacher:Id},{name:t=>`update${t}Attribute`,attacher:Cd},{name:t=>`remove${t}Attribute`,attacher:Od},{name:t=>`replace${t}Attributes`,attacher:Bd},{name:t=>`merge${t}Attributes`,attacher:Td},{name:t=>`update${t}Attributes`,attacher:Fd}];function zd(t){Rd.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Pd=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function jd(t,e,n,r){let i=!1;for(const o in e){if(o===r)continue;const s=e[o];if(i=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),t&&i)return s.key}}function Wd(t,e,n,r){let i,o,s,u=!1;for(const a in e)if(a!==r){i=e[a];do{if(o=i.source,s=i.target,u=n(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected),t&&u)return i.key;i=i.next}while(i!==void 0)}}function or(t,e){const n=Object.keys(t),r=n.length;let i,o=0;return new Lt(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const u=n[o++];if(u===e){i=void 0;continue}i=t[u]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function Hd(t,e,n,r){const i=e[n];if(!i)return;const o=i.source,s=i.target;if(r(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected)&&t)return i.key}function qd(t,e,n,r){let i=e[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(i!==void 0)}function sr(t,e){let n=t[e];return n.next!==void 0?new Lt(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Lt.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Kd(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):ls(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",o=t._edges.values();let s=0,u,a;for(;u=o.next(),u.done!==!0;)a=u.value,a.undirected===i&&(r[s++]=a.key);return r}function Es(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,o=n==="undirected";let s,u,a=!1;const c=e._edges.values();for(;s=c.next(),s.done!==!0;){if(u=s.value,i&&u.undirected!==o)continue;const{key:f,attributes:l,source:h,target:d}=u;if(a=r(f,l,h.key,d.key,h.attributes,d.attributes,u.undirected),t&&a)return f}}function Yd(t,e){if(t.size===0)return Lt.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Lt(function(){let s,u;for(;;){if(s=i.next(),s.done)return s;if(u=s.value,!(n&&u.undirected!==r))break}return{value:{edge:u.key,attributes:u.attributes,source:u.source.key,target:u.target.key,sourceAttributes:u.source.attributes,targetAttributes:u.target.attributes,undirected:u.undirected},done:!1}})}function ri(t,e,n,r,i,o){const s=e?Wd:jd;let u;if(n!=="undirected"&&(r!=="out"&&(u=s(t,i.in,o),t&&u)||r!=="in"&&(u=s(t,i.out,o,r?void 0:i.key),t&&u))||n!=="directed"&&(u=s(t,i.undirected,o),t&&u))return u}function Vd(t,e,n,r){const i=[];return ri(!1,t,e,n,r,function(o){i.push(o)}),i}function Xd(t,e,n){let r=Lt.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Qt(r,or(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Qt(r,or(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Qt(r,or(n.undirected))),r}function ii(t,e,n,r,i,o,s){const u=n?qd:Hd;let a;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(a=u(t,i.in,o,s),t&&a)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(a=u(t,i.out,o,s),t&&a))||e!=="directed"&&typeof i.undirected<"u"&&(a=u(t,i.undirected,o,s),t&&a))return a}function Qd(t,e,n,r,i){const o=[];return ii(!1,t,e,n,r,i,function(s){o.push(s)}),o}function Jd(t,e,n,r){let i=Lt.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Qt(i,sr(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Qt(i,sr(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Qt(i,sr(n.undirected,r))),i}function Zd(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Kd(this,r);if(arguments.length===1){o=""+o;const u=this._nodes.get(o);if(typeof u>"u")throw new N(`Graph.${n}: could not find the "${o}" node in the graph.`);return Vd(this.multi,r==="mixed"?this.type:r,i,u)}if(arguments.length===2){o=""+o,s=""+s;const u=this._nodes.get(o);if(!u)throw new N(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new N(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return Qd(r,this.multi,i,u,s)}throw new G(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function tp(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(c,f,l){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return l=c,Es(!1,this,r,l);if(arguments.length===2){c=""+c,l=f;const h=this._nodes.get(c);if(typeof h>"u")throw new N(`Graph.${o}: could not find the "${c}" node in the graph.`);return ri(!1,this.multi,r==="mixed"?this.type:r,i,h,l)}if(arguments.length===3){c=""+c,f=""+f;const h=this._nodes.get(c);if(!h)throw new N(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(f))throw new N(`Graph.${o}:  could not find the "${f}" target node in the graph.`);return ii(!1,r,this.multi,i,h,f,l)}throw new G(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),f=c.pop();let l;if(c.length===0){let h=0;r!=="directed"&&(h+=this.undirectedSize),r!=="undirected"&&(h+=this.directedSize),l=new Array(h);let d=0;c.push((g,p,m,w,E,k,x)=>{l[d++]=f(g,p,m,w,E,k,x)})}else l=[],c.push((h,d,g,p,m,w,E)=>{l.push(f(h,d,g,p,m,w,E))});return this[o].apply(this,c),l};const u="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(){const c=Array.prototype.slice.call(arguments),f=c.pop(),l=[];return c.push((h,d,g,p,m,w,E)=>{f(h,d,g,p,m,w,E)&&l.push(h)}),this[o].apply(this,c),l};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new G(`Graph.${a}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new G(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f,l;c.length===2?(f=c[0],l=c[1],c=[]):c.length===3?(f=c[1],l=c[2],c=[c[0]]):c.length===4&&(f=c[2],l=c[3],c=[c[0],c[1]]);let h=l;return c.push((d,g,p,m,w,E,k)=>{h=f(h,d,g,p,m,w,E,k)}),this[o].apply(this,c),h}}function ep(t,e){const{name:n,type:r,direction:i}=e,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(a,c,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return f=a,Es(!0,this,r,f);if(arguments.length===2){a=""+a,f=c;const l=this._nodes.get(a);if(typeof l>"u")throw new N(`Graph.${o}: could not find the "${a}" node in the graph.`);return ri(!0,this.multi,r==="mixed"?this.type:r,i,l,f)}if(arguments.length===3){a=""+a,c=""+c;const l=this._nodes.get(a);if(!l)throw new N(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(c))throw new N(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return ii(!0,r,this.multi,i,l,c,f)}throw new G(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){const a=Array.prototype.slice.call(arguments),c=a.pop();return a.push((l,h,d,g,p,m,w)=>c(l,h,d,g,p,m,w)),!!this[o].apply(this,a)};const u="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[u]=function(){const a=Array.prototype.slice.call(arguments),c=a.pop();return a.push((l,h,d,g,p,m,w)=>!c(l,h,d,g,p,m,w)),!this[o].apply(this,a)}}function np(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Lt.empty();if(!arguments.length)return Yd(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(!a)throw new N(`Graph.${o}: could not find the "${s}" node in the graph.`);return Xd(r,i,a)}if(arguments.length===2){s=""+s,u=""+u;const a=this._nodes.get(s);if(!a)throw new N(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(u))throw new N(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return Jd(r,i,a,u)}throw new G(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function rp(t){Pd.forEach(e=>{Zd(t,e),tp(t,e),ep(t,e),np(t,e)})}const ip=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Wn(){this.A=null,this.B=null}Wn.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Wn.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function ze(t,e,n,r,i){for(const o in r){const s=r[o],u=s.source,a=s.target,c=u===n?a:u;if(e&&e.has(c.key))continue;const f=i(c.key,c.attributes);if(t&&f)return c.key}}function oi(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return ze(t,null,r,r.undirected,i);if(typeof n=="string")return ze(t,null,r,r[n],i)}const o=new Wn;let s;if(e!=="undirected"){if(n!=="out"){if(s=ze(t,null,r,r.in,i),t&&s)return s;o.wrap(r.in)}if(n!=="in"){if(s=ze(t,o,r,r.out,i),t&&s)return s;o.wrap(r.out)}}if(e!=="directed"&&(s=ze(t,o,r,r.undirected,i),t&&s))return s}function op(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return oi(!1,t,e,n,function(i){r.push(i)}),r}function Pe(t,e,n){const r=Object.keys(n),i=r.length;let o=0;return new Lt(function(){let u=null;do{if(o>=i)return t&&t.wrap(n),{done:!0};const a=n[r[o++]],c=a.source,f=a.target;if(u=c===e?f:c,t&&t.has(u.key)){u=null;continue}}while(u===null);return{done:!1,value:{neighbor:u.key,attributes:u.attributes}}})}function sp(t,e,n){if(t!=="mixed"){if(t==="undirected")return Pe(null,n,n.undirected);if(typeof e=="string")return Pe(null,n,n[e])}let r=Lt.empty();const i=new Wn;return t!=="undirected"&&(e!=="out"&&(r=Qt(r,Pe(i,n,n.in))),e!=="in"&&(r=Qt(r,Pe(i,n,n.out)))),t!=="directed"&&(r=Qt(r,Pe(i,n,n.undirected))),r}function up(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new N(`Graph.${n}: could not find the "${o}" node in the graph.`);return op(r==="mixed"?this.type:r,i,s)}}function ap(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(c,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const l=this._nodes.get(c);if(typeof l>"u")throw new N(`Graph.${o}: could not find the "${c}" node in the graph.`);oi(!1,r==="mixed"?this.type:r,i,l,f)};const s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(c,f){const l=[];return this[o](c,(h,d)=>{l.push(f(h,d))}),l};const u="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(c,f){const l=[];return this[o](c,(h,d)=>{f(h,d)&&l.push(h)}),l};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,f,l){if(arguments.length<3)throw new G(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=l;return this[o](c,(d,g)=>{h=f(h,d,g)}),h}}function cp(t,e){const{name:n,type:r,direction:i}=e,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;t.prototype[s]=function(c,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const l=this._nodes.get(c);if(typeof l>"u")throw new N(`Graph.${s}: could not find the "${c}" node in the graph.`);return oi(!0,r==="mixed"?this.type:r,i,l,f)};const u="some"+o;t.prototype[u]=function(c,f){return!!this[s](c,f)};const a="every"+o;t.prototype[a]=function(c,f){return!this[s](c,(h,d)=>!f(h,d))}}function fp(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Lt.empty();s=""+s;const u=this._nodes.get(s);if(typeof u>"u")throw new N(`Graph.${o}: could not find the "${s}" node in the graph.`);return sp(r==="mixed"?this.type:r,i,u)}}function hp(t){ip.forEach(e=>{up(t,e),ap(t,e),cp(t,e),fp(t,e)})}function pn(t,e,n,r,i){const o=r._nodes.values(),s=r.type;let u,a,c,f,l,h,d;for(;u=o.next(),u.done!==!0;){let g=!1;if(a=u.value,s!=="undirected"){f=a.out;for(c in f){l=f[c];do{if(h=l.target,g=!0,d=i(a.key,h.key,a.attributes,h.attributes,l.key,l.attributes,l.undirected),t&&d)return l;l=l.next}while(l)}}if(s!=="directed"){f=a.undirected;for(c in f)if(!(e&&a.key>c)){l=f[c];do{if(h=l.target,h.key!==c&&(h=l.source),g=!0,d=i(a.key,h.key,a.attributes,h.attributes,l.key,l.attributes,l.undirected),t&&d)return l;l=l.next}while(l)}}if(n&&!g&&(d=i(a.key,null,a.attributes,null,null,null,null),t&&d))return null}}function lp(t,e){const n={key:t};return ds(e.attributes)||(n.attributes=lt({},e.attributes)),n}function dp(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return ds(n.attributes)||(r.attributes=lt({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function pp(t){if(!pt(t))throw new G('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new G("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!pt(t.attributes)||t.attributes===null))throw new G("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function gp(t){if(!pt(t))throw new G('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new G("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new G("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!pt(t.attributes)||t.attributes===null))throw new G("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new G("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const yp=wd(),mp=new Set(["directed","undirected","mixed"]),Ji=new Set(["domain","_events","_eventsCount","_maxListeners"]),wp=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],vp={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ep(t,e,n){if(n&&!pt(n))throw new G(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new T(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Zi(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function _s(t,e,n,r,i,o,s,u){if(!r&&t.type==="undirected")throw new T(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new T(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(u&&!pt(u))throw new G(`Graph.${e}: invalid attributes. Expecting an object but got "${u}"`);if(o=""+o,s=""+s,u=u||{},!t.allowSelfLoops&&o===s)throw new T(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const a=t._nodes.get(o),c=t._nodes.get(s);if(!a)throw new N(`Graph.${e}: source node "${o}" not found.`);if(!c)throw new N(`Graph.${e}: target node "${s}" not found.`);const f={key:null,undirected:r,source:o,target:s,attributes:u};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new T(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof a.undirected[s]<"u":typeof a.out[s]<"u"))throw new T(`Graph.${e}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const l=new Ge(r,i,a,c,u);t._edges.set(i,l);const h=o===s;return r?(a.undirectedDegree++,c.undirectedDegree++,h&&(a.undirectedLoops++,t._undirectedSelfLoopCount++)):(a.outDegree++,c.inDegree++,h&&(a.directedLoops++,t._directedSelfLoopCount++)),t.multi?l.attachMulti():l.attach(),r?t._undirectedSize++:t._directedSize++,f.key=i,t.emit("edgeAdded",f),i}function _p(t,e,n,r,i,o,s,u,a){if(!r&&t.type==="undirected")throw new T(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new T(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(u){if(a){if(typeof u!="function")throw new G(`Graph.${e}: invalid updater function. Expecting a function but got "${u}"`)}else if(!pt(u))throw new G(`Graph.${e}: invalid attributes. Expecting an object but got "${u}"`)}o=""+o,s=""+s;let c;if(a&&(c=u,u=void 0),!t.allowSelfLoops&&o===s)throw new T(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let f=t._nodes.get(o),l=t._nodes.get(s),h,d;if(!n&&(h=t._edges.get(i),h)){if((h.source.key!==o||h.target.key!==s)&&(!r||h.source.key!==s||h.target.key!==o))throw new T(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${s}" target vs. ("${h.source.key}", "${h.target.key}").`);d=h}if(!d&&!t.multi&&f&&(d=r?f.undirected[s]:f.out[s]),d){const E=[d.key,!1,!1,!1];if(a?!c:!u)return E;if(a){const k=d.attributes;d.attributes=c(k),t.emit("edgeAttributesUpdated",{type:"replace",key:d.key,attributes:d.attributes})}else lt(d.attributes,u),t.emit("edgeAttributesUpdated",{type:"merge",key:d.key,attributes:d.attributes,data:u});return E}u=u||{},a&&c&&(u=c(u));const g={key:null,undirected:r,source:o,target:s,attributes:u};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new T(`Graph.${e}: the "${i}" edge already exists in the graph.`);let p=!1,m=!1;f||(f=Zi(t,o,{}),p=!0,o===s&&(l=f,m=!0)),l||(l=Zi(t,s,{}),m=!0),h=new Ge(r,i,f,l,u),t._edges.set(i,h);const w=o===s;return r?(f.undirectedDegree++,l.undirectedDegree++,w&&(f.undirectedLoops++,t._undirectedSelfLoopCount++)):(f.outDegree++,l.inDegree++,w&&(f.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,g.key=i,t.emit("edgeAdded",g),[i,!0,p,m]}function Ee(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,o=e.undirected,s=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,s&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,s&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:o})}class et extends ud.EventEmitter{constructor(e){if(super(),e=lt({},vp,e),typeof e.multi!="boolean")throw new G(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!mp.has(e.type))throw new G(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new G(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?ps:e.type==="directed"?gs:ys;Dt(this,"NodeDataClass",n);const r="geid_"+yp()+"_";let i=0;const o=()=>{let s;do s=r+i++;while(this._edges.has(s));return s};Dt(this,"_attributes",{}),Dt(this,"_nodes",new Map),Dt(this,"_edges",new Map),Dt(this,"_directedSize",0),Dt(this,"_undirectedSize",0),Dt(this,"_directedSelfLoopCount",0),Dt(this,"_undirectedSelfLoopCount",0),Dt(this,"_edgeKeyGenerator",o),Dt(this,"_options",e),Ji.forEach(s=>Dt(this,s,this[s])),Gt(this,"order",()=>this._nodes.size),Gt(this,"size",()=>this._edges.size),Gt(this,"directedSize",()=>this._directedSize),Gt(this,"undirectedSize",()=>this._undirectedSize),Gt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Gt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Gt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Gt(this,"multi",this._options.multi),Gt(this,"type",this._options.type),Gt(this,"allowSelfLoops",this._options.allowSelfLoops),Gt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new G(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new G(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new G(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new T("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new N(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new N(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new T("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new N(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new N(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new T("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new N(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new N(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new N(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new N(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new N(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new N(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(e===i)return o;if(e===o)return i;throw new N(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new N(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new N(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new N(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new N(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Ep(this,e,n).key}mergeNode(e,n){if(n&&!pt(n))throw new G(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(lt(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new G(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const o=r.attributes;r.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new N(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Ee(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Ee(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Ee(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=$t(this,r,i,this.type),!n)throw new N(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new N(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Ee(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new T("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new T("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=$t(this,e,n,"directed");if(!r)throw new N(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Ee(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new T("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new T("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=$t(this,e,n,"undirected");if(!r)throw new N(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Ee(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new G("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!pt(e))throw new G("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!pt(e))throw new G("Graph.mergeAttributes: provided attributes are not a plain object.");return lt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new G("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new G("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Qi(n))throw new G("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new G("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Qi(n))throw new G("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,s,u;for(;i=r.next(),i.done!==!0;)o=i.value,s=o.source,u=o.target,o.attributes=e(o.key,o.attributes,s.key,u.key,s.attributes,u.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new G("Graph.forEachAdjacencyEntry: expecting a callback.");pn(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new G("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");pn(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new G("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");pn(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new G("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");pn(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):ls(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new G("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new G("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new G("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const o=new Array(this.order);let s=0;for(;r=n.next(),r.done!==!0;)i=r.value,o[s++]=e(i.key,i.attributes);return o}someNode(e){if(typeof e!="function")throw new G("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new G("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new G("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const o=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,n){if(typeof e!="function")throw new G("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new G("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let o,s;for(;o=i.next(),o.done!==!0;)s=o.value,r=e(r,s.key,s.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Lt(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,o)=>{e[n++]=lp(o,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=dp(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof et)return e.forEachNode((a,c)=>{n?this.mergeNode(a,c):this.addNode(a,c)}),e.forEachEdge((a,c,f,l,h,d,g)=>{n?g?this.mergeUndirectedEdgeWithKey(a,f,l,c):this.mergeDirectedEdgeWithKey(a,f,l,c):g?this.addUndirectedEdgeWithKey(a,f,l,c):this.addDirectedEdgeWithKey(a,f,l,c)}),this;if(!pt(e))throw new G("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!pt(e.attributes))throw new G("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,o,s,u;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new G("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],pp(s);const{key:a,attributes:c}=s;n?this.mergeNode(a,c):this.addNode(a,c)}}if(e.edges){let a=!1;if(this.type==="undirected"&&(a=!0),o=e.edges,!Array.isArray(o))throw new G("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){u=o[r],gp(u);const{source:c,target:f,attributes:l,undirected:h=a}=u;let d;"key"in u?(d=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,d.call(this,u.key,c,f,l)):(d=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,d.call(this,c,f,l))}}return this}nullCopy(e){const n=new et(lt({},this._options,e));return n.replaceAttributes(lt({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const o=lt({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new T(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new T("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new T("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,_s(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,lt({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,s)=>{e[s]=o.attributes});const n={},r={};this._edges.forEach((o,s)=>{const u=o.undirected?"--":"->";let a="",c=o.source.key,f=o.target.key,l;o.undirected&&c>f&&(l=c,c=f,f=l);const h=`(${c})${u}(${f})`;s.startsWith("geid_")?this.multi&&(typeof r[h]>"u"?r[h]=0:r[h]++,a+=`${r[h]}. `):a+=`[${s}]: `,a+=h,n[a]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!Ji.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,Dt(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(et.prototype[Symbol.for("nodejs.util.inspect.custom")]=et.prototype.inspect);wp.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?_s:_p;t.generateKey?et.prototype[n]=function(i,o,s){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,o,s,e==="update")}:et.prototype[n]=function(i,o,s,u){return r(this,n,!1,(t.type||this.type)==="undirected",i,o,s,u,e==="update")}})});$d(et);zd(et);rp(et);hp(et);class bs extends et{constructor(e){const n=lt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new G("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new G('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class xs extends et{constructor(e){const n=lt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new G("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new G('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class As extends et{constructor(e){const n=lt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new G("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class Ss extends et{constructor(e){const n=lt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new G("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new G('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Ms extends et{constructor(e){const n=lt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new G("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new G('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Ue(t){t.from=function(e,n){const r=lt({},e.options,n),i=new t(r);return i.import(e),i}}Ue(et);Ue(bs);Ue(xs);Ue(As);Ue(Ss);Ue(Ms);et.Graph=et;et.DirectedGraph=bs;et.UndirectedGraph=xs;et.MultiGraph=As;et.MultiDirectedGraph=Ss;et.MultiUndirectedGraph=Ms;et.InvalidArgumentsGraphError=G;et.NotFoundGraphError=N;et.UsageGraphError=T;function bp(t,e){const n={id:"ROOT"},r=[...new Set(t.filter(h=>h.SUBMODULE>e).map(h=>h.SUBMODULE))].filter(h=>h).map(h=>{const d=t.find(g=>g.SUBMODULE===h);return{id:"submodule-"+h,parent:"ROOT",NAME:d.SUBMODULE_NAME,type:"tier1"}}),i=[...new Set(t.filter(h=>h.SEGMENT&&h.SUBMODULE&&+h.SUBMODULE>e).map(h=>h.SUBMODULE+"_"+h.SEGMENT))].filter(h=>h!=="null_null").map(h=>{const d=t.find(g=>g.SUBMODULE===+h.split("_")[0]&&g.SEGMENT===+h.split("_")[1]);return{id:"segment-"+h,parent:"submodule-"+h.split("_")[0],NAME:d.SEGMENT_NAME,type:"tier2"}});let o=[n];t.forEach(h=>{let d;h.type==="tier1"?d="ROOT":h.type==="tier2"?d="submodule-"+h.SUBMODULE:d="segment-"+h.SUBMODULE+"_"+h.SEGMENT,o.push({parent:d,id:h.id,NAME:h.NAME,type:h.type})}),o=o.concat(r).concat(i);const s={},u=[];o.forEach(h=>{s[h.id]=h});for(const h in s)u.push(s[h]);o=u;function a(h,d){h.append("span").text(d.NAME),!(d.parent==="ROOT"||d.type==="tier1"||d.type==="tier2")&&h.append("input").attr("type","checkbox")}function c(h,d){const g=h.append("span").attr("class","list-label-"+d.depth);if(g.append("span").classed("arrow",!0),g.call(a,d.data),!d.hasOwnProperty("children"))return;const p=h.append("ul").style("list-style-type","none").selectAll("li").data(d.children,m=>m.NAME);p.exit().remove(),p.enter().append("li").attr("class","list-item-"+d.depth).style("cursor","pointer").merge(p).each(function(m){it(this).call(c,m)}),g.select(".arrow").text(" ")}function f(h){h.classed("viewport",!0).style("overflow-y","scroll").style("height","calc(100vh - 170px)").append("div").classed("body",!0).style("transform","scale(1.5)").style("transform-origin","top left")}function l(h,d){const g=qh().id(p=>p.id).parentId(p=>p.parent)(d);g.eachBefore(p=>{p.children&&p.children.sort((m,w)=>m.data.id.localeCompare(w.data.id))}),h.select(".body").call(c,g),h.select(".body > span").remove(),h.select(".body > ul").style("padding-left",0)}it("#view div").remove(),it("#view").append("div").call(f).call(l,o)}function Zt(t){return Array.isArray?Array.isArray(t):Ds(t)==="[object Array]"}const xp=1/0;function Ap(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-xp?"-0":e}function Sp(t){return t==null?"":Ap(t)}function zt(t){return typeof t=="string"}function Ns(t){return typeof t=="number"}function Mp(t){return t===!0||t===!1||Np(t)&&Ds(t)=="[object Boolean]"}function ks(t){return typeof t=="object"}function Np(t){return ks(t)&&t!==null}function St(t){return t!=null}function ur(t){return!t.trim().length}function Ds(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const kp="Incorrect 'index' type",Dp=t=>`Invalid value for key ${t}`,$p=t=>`Pattern length exceeds max of ${t}.`,Lp=t=>`Missing ${t} property in key`,Gp=t=>`Property 'weight' in key '${t}' must be a positive integer`,to=Object.prototype.hasOwnProperty;class Up{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=$s(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function $s(t){let e=null,n=null,r=null,i=1,o=null;if(zt(t)||Zt(t))r=t,e=eo(t),n=xr(t);else{if(!to.call(t,"name"))throw new Error(Lp("name"));const s=t.name;if(r=s,to.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Gp(s));e=eo(s),n=xr(s),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function eo(t){return Zt(t)?t:t.split(".")}function xr(t){return Zt(t)?t.join("."):t}function Ip(t,e){let n=[],r=!1;const i=(o,s,u)=>{if(St(o))if(!s[u])n.push(o);else{let a=s[u];const c=o[a];if(!St(c))return;if(u===s.length-1&&(zt(c)||Ns(c)||Mp(c)))n.push(Sp(c));else if(Zt(c)){r=!0;for(let f=0,l=c.length;f<l;f+=1)i(c[f],s,u+1)}else s.length&&i(c,s,u+1)}};return i(t,zt(e)?e.split("."):e,0),r?n:n[0]}const Cp={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Op={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Bp={location:0,threshold:.6,distance:100},Tp={useExtendedSearch:!1,getFn:Ip,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var F={...Op,...Cp,...Bp,...Tp};const Fp=/[^ ]+/g;function Rp(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(Fp).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*t),u=parseFloat(Math.round(s*r)/r);return n.set(o,u),u},clear(){n.clear()}}}class si{constructor({getFn:e=F.getFn,fieldNormWeight:n=F.fieldNormWeight}={}){this.norm=Rp(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,zt(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();zt(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!St(e)||ur(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(e):this.getFn(e,i.path);if(St(s)){if(Zt(s)){let u=[];const a=[{nestedArrIndex:-1,value:s}];for(;a.length;){const{nestedArrIndex:c,value:f}=a.pop();if(St(f))if(zt(f)&&!ur(f)){let l={v:f,i:c,n:this.norm.get(f)};u.push(l)}else Zt(f)&&f.forEach((l,h)=>{a.push({nestedArrIndex:h,value:l})})}r.$[o]=u}else if(zt(s)&&!ur(s)){let u={v:s,n:this.norm.get(s)};r.$[o]=u}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Ls(t,e,{getFn:n=F.getFn,fieldNormWeight:r=F.fieldNormWeight}={}){const i=new si({getFn:n,fieldNormWeight:r});return i.setKeys(t.map($s)),i.setSources(e),i.create(),i}function zp(t,{getFn:e=F.getFn,fieldNormWeight:n=F.fieldNormWeight}={}){const{keys:r,records:i}=t,o=new si({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function gn(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=F.distance,ignoreLocation:o=F.ignoreLocation}={}){const s=e/t.length;if(o)return s;const u=Math.abs(r-n);return i?s+u/i:u?1:s}function Pp(t=[],e=F.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=t.length;o<s;o+=1){let u=t[o];u&&r===-1?r=o:!u&&r!==-1&&(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}const fe=32;function jp(t,e,n,{location:r=F.location,distance:i=F.distance,threshold:o=F.threshold,findAllMatches:s=F.findAllMatches,minMatchCharLength:u=F.minMatchCharLength,includeMatches:a=F.includeMatches,ignoreLocation:c=F.ignoreLocation}={}){if(e.length>fe)throw new Error($p(fe));const f=e.length,l=t.length,h=Math.max(0,Math.min(r,l));let d=o,g=h;const p=u>1||a,m=p?Array(l):[];let w;for(;(w=t.indexOf(e,g))>-1;){let V=gn(e,{currentLocation:w,expectedLocation:h,distance:i,ignoreLocation:c});if(d=Math.min(V,d),g=w+f,p){let Y=0;for(;Y<f;)m[w+Y]=1,Y+=1}}g=-1;let E=[],k=1,x=f+l;const O=1<<f-1;for(let V=0;V<f;V+=1){let Y=0,q=x;for(;Y<q;)gn(e,{errors:V,currentLocation:h+q,expectedLocation:h,distance:i,ignoreLocation:c})<=d?Y=q:x=q,q=Math.floor((x-Y)/2+Y);x=q;let Q=Math.max(1,h-q+1),B=s?l:Math.min(h+q,l)+f,W=Array(B+2);W[B+1]=(1<<V)-1;for(let rt=B;rt>=Q;rt-=1){let qt=rt-1,ft=n[t.charAt(qt)];if(p&&(m[qt]=+!!ft),W[rt]=(W[rt+1]<<1|1)&ft,V&&(W[rt]|=(E[rt+1]|E[rt])<<1|1|E[rt+1]),W[rt]&O&&(k=gn(e,{errors:V,currentLocation:qt,expectedLocation:h,distance:i,ignoreLocation:c}),k<=d)){if(d=k,g=qt,g<=h)break;Q=Math.max(1,2*h-g)}}if(gn(e,{errors:V+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:c})>d)break;E=W}const nt={isMatch:g>=0,score:Math.max(.001,k)};if(p){const V=Pp(m,u);V.length?a&&(nt.indices=V):nt.isMatch=!1}return nt}function Wp(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}const In=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Gs{constructor(e,{location:n=F.location,threshold:r=F.threshold,distance:i=F.distance,includeMatches:o=F.includeMatches,findAllMatches:s=F.findAllMatches,minMatchCharLength:u=F.minMatchCharLength,isCaseSensitive:a=F.isCaseSensitive,ignoreDiacritics:c=F.ignoreDiacritics,ignoreLocation:f=F.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:c,ignoreLocation:f},e=a?e:e.toLowerCase(),e=c?In(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const l=(d,g)=>{this.chunks.push({pattern:d,alphabet:Wp(d),startIndex:g})},h=this.pattern.length;if(h>fe){let d=0;const g=h%fe,p=h-g;for(;d<p;)l(this.pattern.substr(d,fe),d),d+=fe;if(g){const m=h-fe;l(this.pattern.substr(m),m)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=r?In(e):e,this.pattern===e){let p={isMatch:!0,score:0};return i&&(p.indices=[[0,e.length-1]]),p}const{location:o,distance:s,threshold:u,findAllMatches:a,minMatchCharLength:c,ignoreLocation:f}=this.options;let l=[],h=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:w})=>{const{isMatch:E,score:k,indices:x}=jp(e,p,m,{location:o+w,distance:s,threshold:u,findAllMatches:a,minMatchCharLength:c,includeMatches:i,ignoreLocation:f});E&&(d=!0),h+=k,E&&x&&(l=[...l,...x])});let g={isMatch:d,score:d?h/this.chunks.length:1};return d&&i&&(g.indices=l),g}}class se{constructor(e){this.pattern=e}static isMultiMatch(e){return no(e,this.multiRegex)}static isSingleMatch(e){return no(e,this.singleRegex)}search(){}}function no(t,e){const n=t.match(e);return n?n[1]:null}class Hp extends se{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class qp extends se{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Kp extends se{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Yp extends se{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Vp extends se{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Xp extends se{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Us extends se{constructor(e,{location:n=F.location,threshold:r=F.threshold,distance:i=F.distance,includeMatches:o=F.includeMatches,findAllMatches:s=F.findAllMatches,minMatchCharLength:u=F.minMatchCharLength,isCaseSensitive:a=F.isCaseSensitive,ignoreDiacritics:c=F.ignoreDiacritics,ignoreLocation:f=F.ignoreLocation}={}){super(e),this._bitapSearch=new Gs(e,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:c,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Is extends se{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const Ar=[Hp,Is,Kp,Yp,Xp,Vp,qp,Us],ro=Ar.length,Qp=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Jp="|";function Zp(t,e={}){return t.split(Jp).map(n=>{let r=n.trim().split(Qp).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const u=r[o];let a=!1,c=-1;for(;!a&&++c<ro;){const f=Ar[c];let l=f.isMultiMatch(u);l&&(i.push(new f(l,e)),a=!0)}if(!a)for(c=-1;++c<ro;){const f=Ar[c];let l=f.isSingleMatch(u);if(l){i.push(new f(l,e));break}}}return i})}const tg=new Set([Us.type,Is.type]);class eg{constructor(e,{isCaseSensitive:n=F.isCaseSensitive,ignoreDiacritics:r=F.ignoreDiacritics,includeMatches:i=F.includeMatches,minMatchCharLength:o=F.minMatchCharLength,ignoreLocation:s=F.ignoreLocation,findAllMatches:u=F.findAllMatches,location:a=F.location,threshold:c=F.threshold,distance:f=F.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:o,findAllMatches:u,ignoreLocation:s,location:a,threshold:c,distance:f},e=n?e:e.toLowerCase(),e=r?In(e):e,this.pattern=e,this.query=Zp(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:o}=this.options;e=i?e:e.toLowerCase(),e=o?In(e):e;let s=0,u=[],a=0;for(let c=0,f=n.length;c<f;c+=1){const l=n[c];u.length=0,s=0;for(let h=0,d=l.length;h<d;h+=1){const g=l[h],{isMatch:p,indices:m,score:w}=g.search(e);if(p){if(s+=1,a+=w,r){const E=g.constructor.type;tg.has(E)?u=[...u,...m]:u.push(m)}}else{a=0,s=0,u.length=0;break}}if(s){let h={isMatch:!0,score:a/s};return r&&(h.indices=u),h}}return{isMatch:!1,score:1}}}const Sr=[];function ng(...t){Sr.push(...t)}function Mr(t,e){for(let n=0,r=Sr.length;n<r;n+=1){let i=Sr[n];if(i.condition(t,e))return new i(t,e)}return new Gs(t,e)}const Cn={AND:"$and",OR:"$or"},Nr={PATH:"$path",PATTERN:"$val"},kr=t=>!!(t[Cn.AND]||t[Cn.OR]),rg=t=>!!t[Nr.PATH],ig=t=>!Zt(t)&&ks(t)&&!kr(t),io=t=>({[Cn.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Cs(t,e,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=rg(i);if(!s&&o.length>1&&!kr(i))return r(io(i));if(ig(i)){const a=s?i[Nr.PATH]:o[0],c=s?i[Nr.PATTERN]:i[a];if(!zt(c))throw new Error(Dp(a));const f={keyId:xr(a),pattern:c};return n&&(f.searcher=Mr(c,e)),f}let u={children:[],operator:o[0]};return o.forEach(a=>{const c=i[a];Zt(c)&&c.forEach(f=>{u.children.push(r(f))})}),u};return kr(t)||(t=io(t)),r(t)}function og(t,{ignoreFieldNorm:e=F.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const u=i?i.weight:null;r*=Math.pow(s===0&&u?Number.EPSILON:s,(u||1)*(e?1:o))}),n.score=r})}function sg(t,e){const n=t.matches;e.matches=[],St(n)&&n.forEach(r=>{if(!St(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),e.matches.push(s)})}function ug(t,e){e.score=t.score}function ag(t,e,{includeMatches:n=F.includeMatches,includeScore:r=F.includeScore}={}){const i=[];return n&&i.push(sg),r&&i.push(ug),t.map(o=>{const{idx:s}=o,u={item:e[s],refIndex:s};return i.length&&i.forEach(a=>{a(o,u)}),u})}class Ie{constructor(e,n={},r){this.options={...F,...n},this.options.useExtendedSearch,this._keyStore=new Up(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof si))throw new Error(kp);this._myIndex=n||Ls(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){St(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:u}=this.options;let a=zt(e)?zt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return og(a,{ignoreFieldNorm:u}),o&&a.sort(s),Ns(n)&&n>-1&&(a=a.slice(0,n)),ag(a,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=Mr(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:u})=>{if(!St(o))return;const{isMatch:a,score:c,indices:f}=n.searchIn(o);a&&i.push({item:o,idx:s,matches:[{score:c,value:o,norm:u,indices:f}]})}),i}_searchLogical(e){const n=Cs(e,this.options),r=(u,a,c)=>{if(!u.children){const{keyId:l,searcher:h}=u,d=this._findMatches({key:this._keyStore.get(l),value:this._myIndex.getValueForItemAtKeyId(a,l),searcher:h});return d&&d.length?[{idx:c,item:a,matches:d}]:[]}const f=[];for(let l=0,h=u.children.length;l<h;l+=1){const d=u.children[l],g=r(d,a,c);if(g.length)f.push(...g);else if(u.operator===Cn.AND)return[]}return f},i=this._myIndex.records,o={},s=[];return i.forEach(({$:u,i:a})=>{if(St(u)){let c=r(n,u,a);c.length&&(o[a]||(o[a]={idx:a,item:u,matches:[]},s.push(o[a])),c.forEach(({matches:f})=>{o[a].matches.push(...f)}))}}),s}_searchObjectList(e){const n=Mr(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:u})=>{if(!St(s))return;let a=[];r.forEach((c,f)=>{a.push(...this._findMatches({key:c,value:s[f],searcher:n}))}),a.length&&o.push({idx:u,item:s,matches:a})}),o}_findMatches({key:e,value:n,searcher:r}){if(!St(n))return[];let i=[];if(Zt(n))n.forEach(({v:o,i:s,n:u})=>{if(!St(o))return;const{isMatch:a,score:c,indices:f}=r.searchIn(o);a&&i.push({score:c,key:e,value:o,idx:s,norm:u,indices:f})});else{const{v:o,n:s}=n,{isMatch:u,score:a,indices:c}=r.searchIn(o);u&&i.push({score:a,key:e,value:o,norm:s,indices:c})}return i}}Ie.version="7.1.0";Ie.createIndex=Ls;Ie.parseIndex=zp;Ie.config=F;Ie.parseQuery=Cs;ng(eg);async function cg({nodes:t,links:e},{containerSelector:n,nodeId:r="id",sourceId:i="source",targetId:o="target",nodeGroup:s,nodeGroups:u,nodeRadius:a,nodeTitle:c,nodeFill:f="0xFFFFFF",nodeStroke:l="0xFFFFFF",nodeStrokeWidth:h=4,nodeFillOpacity:d=1,nodeStrokeOpacity:g=1,nodeMinSize:p=6,linkStroke:m="0xFFFFFF",linkStrokeOpacity:w=.7,linkStrokeWidth:E=1.5,labelColor:k="white",labelScale:x=2,colors:O=al,width:nt=640,height:V=400,tooltipStyles:Y={width:"300px",height:"auto",padding:"10px","background-color":"white",border:"1px solid black","z-index":10}}={}){console.log("received data",t,e);const q=0;let Q=0,B={},W={},J=[],rt=[],qt=["NAME","Parameter Explanation","SUBMODULE_NAME","SEGMENT_NAME"],ft=[],Mt=0,Kt,ot=!1,Ot=!1,Yt=!1,Bt=!0,me=!1,Tt=!0,Nt=!1,Ce=!0,on=1,Oe="Whole";const Os=Rt(t,y=>y[r]).map(_e),Bs=Rt(e,y=>y[i]).map(_e),Ts=Rt(e,y=>y[o]).map(_e);t=Rt(t,(y,_)=>({id:Os[_],...y,type:"tier3"})),e=Rt(e,(y,_)=>({source:Bs[_],target:Ts[_]}));const Be=[...new Set(t.filter(y=>y.SUBMODULE>q).map(y=>y.SUBMODULE))].filter(y=>y).map(y=>{B["submodule-"+y]=0,W[y]=Bt?1:0;const _=t.find($=>$.SUBMODULE===y);return{id:"submodule-"+y,NAME:_?_.SUBMODULE_NAME.split(",")[0]:"",SUBMODULE_NAME:_?_.SUBMODULE_NAME.split(",")[0]:"",SUBMODULE:y,type:"tier1"}}),ee=[...new Set(t.filter(y=>y.SUBMODULE>q).map(y=>y.SUBMODULE+"_"+y.SEGMENT))].filter(y=>y!=="null_null").map(y=>{B["segment-"+y]=0,W[y]=Bt?0:1;const _=t.find($=>$.SUBMODULE===+y.split("_")[0]&&$.SEGMENT===+y.split("_")[1]);return{id:"segment-"+y,NAME:_?_.SEGMENT_NAME.split(",")[0]:"",SUBMODULE_NAME:_?_.SUBMODULE_NAME.split(",")[0]:"",SUBMODULE:+y.split("_")[0],SEGMENT_NAME:_?_.SEGMENT_NAME.split(",")[0]:"",SEGMENT:+y.split("_")[1],type:"tier2"}});for(let y=0;y<t.length;y++)B[t[y].id]=0;for(let y=0;y<e.length;y++){let _=e[y];const $=t.find(D=>D.id===_.source),b=t.find(D=>D.id===_.target);B[_.target]++,B["segment-"+b.SUBMODULE+"_"+b.SEGMENT]++,B["submodule-"+b.SUBMODULE]++,_.sourceSegment=$.SEGMENT,_.targetSegment=b.SEGMENT,_.sourceSubmodule=$.SUBMODULE,_.targetSubmodule=b.SUBMODULE}let Hn=ce(t,e,!0,"SUBMODULE",q),v=ce(t.concat(ee),e,Bt,"SUBMODULE",q),qn=[...Hn.nodes],xt=[...Hn.links],sn=[...Hn.nodes,...ee,...Be];const ui=sl().domain(a?Js(t,a):[0,du(Object.values(B))]).range([p,p*5]).clamp(!0),un=it(n).append("div").attr("class","tooltip").style("position","absolute").style("visibility","hidden");for(const y in Y)un.style(y,Y[y]);const Ft=it(n).append("div").attr("class","message");if(Ft.append("h2").attr("class","clickedNodes-1"),Ft.append("h2").attr("class","clickedNodes-2"),Ft.append("h3").attr("class","shortestPath-status").style("color","white"),Ft.append("h3").attr("class","clickedNodes-reset").attr("text-decoration","underline").attr("pointer-events","auto").style("cursor","pointer").style("color","white").html("RESET").on("click",function(){ve()}),window.location.href.includes("?state=%")){let y=window.location.href.split("?state=%")[1].split("-");y[0]=y[0].slice(2),y[y.length-1]=y[y.length-1].slice(0,-3),v.nodes=sn.filter(b=>be(y,b.NAME.toString())),v.links=xt.filter(b=>yn(y,b));for(let b=0;b<v.nodes.length;b++)fi(v.nodes[b]),hi(v.nodes[b]),li(v.nodes[b]);const _=v.nodes.map(b=>b.id);let $=[];for(let b=0;b<v.links.length;b++)yn(_,v.links[b])&&$.push(v.links[b]);v.links=$,Be.map(b=>{W[b.SUBMODULE]=1}),ee.map(b=>{W[b.SEGMENT]=0})}const yt=ah().force("link",th().id(y=>y.id)).force("x",fh(y=>y.x)).force("y",hh(y=>y.y)).force("collide",Jf().radius(y=>y.type==="tier1"||y.type==="tier2"?y.radius*2:y.radius).iterations(3)).force("cluster",Ps().strength(.45));yt.stop();const kt=new ct.Application({width:nt,height:V,resolution:2,transparent:!0,antialias:!0,autoDensity:!0,autoStart:!0});document.querySelector(n).appendChild(kt.view);const mt=new Hs({screenWidth:nt,screenHeight:V,worldWidth:nt,worldHeight:V,events:kt.renderer.events});kt.stage.eventMode="static",kt.stage.hitArea=kt.screen;const ai=()=>{kt.stage.off("pointermove"),mt.pause=!1};kt.stage.on("pointerup",ai),kt.stage.on("pointerupoutside",ai),kt.stage.addChild(mt),mt.drag().pinch().wheel().decelerate().clampZoom({minScale:.2,maxScale:5}),mt.center=new ct.Point(0,0);const an=new ct.Graphics;an.beginFill(f),an.lineStyle(h,l,g),an.drawCircle(0,0,44);const Fs=kt.renderer.generateTexture(an,{resolution:2}),ue=new ct.Graphics;let Te=12;ue.beginFill(16777215,1),ue.lineStyle(0,16777215,1),ue.moveTo(-Te,0),ue.lineTo(Te,Te),ue.lineTo(Te,-Te),ue.endFill();const Rs=kt.renderer.generateTexture(ue,{resolution:2}),Kn=new ct.Container;mt.addChild(Kn);const Yn=new ct.Container;mt.addChild(Yn);const Vn=new ct.Container;mt.addChild(Vn);let Vt=new WeakMap,Xn=new WeakMap,ae=new WeakMap,ne=new WeakMap;we(!0),Ws();function we(y){const _=[],$=new Set;for(let S=0;S<v.links.length;S++){let A=v.links[S];if(Object.keys(A).length===0)continue;const L=`${wt(A)}-${gt(A)}`;!$.has(L)&&wt(A)!==gt(A)&&($.add(L),_.push(A))}v.links=_,c===void 0?Rt(v.nodes,S=>S.NAME).map(_e):Rt(v.nodes,c).map(_e);const b=s==null?null:Rt(v.nodes,s).map(_e),D=typeof E!="function"?null:Rt(v.links,E),C=typeof m!="function"?null:Rt(v.links,m);b&&u===void 0&&(u=su(b));const z=s==null?null:Fo(u,O);for(let S=0;S<v.nodes.length;S++){let A=v.nodes[S];if(A.linkCnt=B[A.id]||0,A.color=b?z(b[S]):f,A.radius=ui(A.linkCnt),rt.length>0){let L=rt.find(R=>R.id===A.SUBMODULE+"_"+A.SEGMENT)||rt.find(R=>R.id===A.SUBMODULE);L&&!A.x&&!A.y&&(A.x=L.x,A.y=L.y)}}for(let S=0;S<v.links.length;S++){let A=v.links[S];A.linkStroke=C?C[S]:m,A.linkStrokeWidth=D?D[S]:E}console.log("elements on screen",v);const H=je(v.nodes,v.links),M=()=>{const S=mt.scale.x,L=[1,2,3,1/0].findIndex(R=>S<=R);for(let R=0;R<v.nodes.length;R++){const K=ae.get(v.nodes[R]);K.visible=v.nodes[R].type==="tier1"||v.nodes[R].type==="tier2"?1:L>=3}},U=(S,A)=>{S.fx=A.x,S.fy=A.y,dt()},P=S=>{mt.pause=!0,kt.stage.on("pointermove",function(A){U(S,mt.toWorld(A.global))})},I=S=>{console.log("double click on node"),S.type==="tier1"||W[S.SUBMODULE+"_"+S.SEGMENT]===1&&W[S.SUBMODULE]===0?(console.log("expand"),Jn(S)):(console.log("collapse"),Qn(S))};let j=[];for(let S=0;S<sn.length;S++){let A=sn[S],L=Vt.get(A),R=ae.get(A);if(v.nodes.findIndex(K=>K.id===A.id)===-1)L&&Yn.removeChild(L),R&&Vn.removeChild(R);else{if(!L){L=new ct.Container,L.name=A.id,L.cursor="pointer",L.hitArea=new ct.Circle(0,0,A.radius+2),L.eventMode="static",L.visible=!be(J,A.id),L.on("pointerdown",function(st){Mt++;const ht=Xn.get(st.currentTarget);Mt===1?Nt?Kt=setTimeout(function(){ci(ht,H),Mt=0},300):Tt?Kt=setTimeout(function(){ft=[ht],js(ht,H),Mt=0},300):(P(ht),Kt=setTimeout(function(){Mt=0},300)):Mt===2&&!Nt&&!Tt&&(clearTimeout(Kt),I(ht),Mt=0)}),L.on("mouseover",st=>yi(Xn.get(st.currentTarget))),L.on("mouseout",()=>un.style("visibility","hidden"));const K=new ct.Sprite(Fs);K.name="CIRCLE",K.x=-A.radius,K.y=-A.radius,K.tint=A.color,K.alpha=d,K.width=A.radius*2,K.height=A.radius*2,L.addChild(K),Yn.addChild(L)}if(!R){R=new ct.Container,R.visible=A.type==="tier1"||A.type==="tier2";const K=new ct.TextStyle({fontFamily:"Lato",fontSize:A.radius*x,align:"left",fill:k,stroke:"black",strokeThickness:6}),st=new ct.Text(A.NAME,K);st.name="LABEL";const ht=ct.TextMetrics.measureText(A.NAME,K);st.x=-ht.width/4,st.y=3,st.resolution=2,st.scale.set(.5),R.addChild(st),Vn.addChild(R)}j.push([A,L,R])}}Kn.removeChildren();let X=[];for(let S=0;S<v.links.length;S++){let A=v.links[S];const L=A.linkStrokeWidth,R=v.nodes.find(Fe=>Fe.id===gt(A)),K=new ct.Container;K.name=wt(A)+"-"+gt(A),K.pivot.set(0,L/2),K.alpha=v.links.length>200?.3:w;const st=new ct.Sprite(ct.Texture.WHITE);st.name="LINE",st.x=R?R.radius:0,st.y=-L/2,st.height=L,K.addChild(st);const ht=new ct.Sprite(Rs);ht.name="ARROW",ht.x=R?R.radius:0,ht.y=-3,ht.width=6,ht.height=6,ht.alpha=me?1:0,K.addChild(ht),Kn.addChild(K),X.push([A,K])}Vt=new WeakMap(j.map(([S,A,L])=>[S,A])),Xn=new WeakMap(j.map(([S,A,L])=>[A,S])),ae=new WeakMap(j.map(([S,A,L])=>[S,L])),new WeakMap(j.map(([S,A,L])=>[L,S])),ne=new WeakMap(X.map(([S,A])=>[S,A])),new WeakMap(X.map(([S,A])=>[A,S])),yt.nodes(v.nodes).force("link").links(v.links),y?(console.log("run static graph layout"),yt.force("charge",ch().strength(Bt?-100:-250)),yt.alphaTarget(.1).restart(),yt.tick(Math.ceil(Math.log(yt.alphaMin())/Math.log(1-yt.alphaDecay()))),dt()):(console.log("reheat graph"),yt.stop(),yt.nodes([]).force("link").links([]),yt.nodes(v.nodes).force("link").links(v.links),yt.alphaTarget(.1).restart(),yt.tick(Math.ceil(Math.log(yt.alphaMin())/Math.log(1-yt.alphaDecay()))),dt()),rt=v.nodes.filter(S=>S.type==="tier1"||S.type==="tier2").map(S=>({x:S.x,y:S.y,id:S.type==="tier1"?S.SUBMODULE:S.SUBMODULE+"_"+S.SEGMENT})),mt.on("zoomed-end",()=>{if(mt.dirty){if(Ot||ot||Yt)return;M(),mt.dirty=!1}}),bp(v.nodes,q),mi(v.nodes,Nt,H),document.querySelector(".viewport").scrollTo(0,Q),Zn(".list-label-2").on("click",function(S,A){if(Ot||ot||Yt)return;S.preventDefault(),S.stopPropagation(),Q=document.querySelector(".viewport").scrollTop;let L=A.data;L.SUBMODULE=+L.id.split("-")[1].split("_")[0],L.SEGMENT=+L.id.split("-")[1].split("_")[1],it(this).select(".arrow").text()!==" "?(console.log("expand segment to variable nodes",L.type),Jn(L)):(console.log("collapse variable nodes to segment"),L.type="tier3",Qn(L));const R=it(it(this).node().parentNode).select("ul");if(R.size()){const K=R.style("display")!=="none";it(this).select(".arrow").text(K?" ":" ")}}),Zn(".list-label-1").on("click",function(S,A){if(Ot||ot||Yt)return;S.preventDefault(),S.stopPropagation(),Q=document.querySelector(".viewport").scrollTop;let L=A.data;L.SUBMODULE=+L.id.split("-")[1].split("_")[0],it(this).select(".arrow").text()!==" "?(console.log("expand submodule to segments",L.type),Jn(L)):(console.log("collapse segments to submodules"),L.type="tier2",Qn(L));const R=it(it(this).node().parentNode).select("ul");if(R.size()){const K=R.style("display")!=="none";it(this).select(".arrow").text(K?" ":" ")}}),Zn(".list-label-3 input").on("change",function(S,A){S.preventDefault(),S.stopPropagation();const L=fg(it("#view"));if(console.log("checkbox click",L),L.length===0)return ve();let R=[];if(Tt&&(R=ar(H,L,on)),Nt&&(pi(L),R=oo(H,L),L.length===2&&(Ot=!0,document.querySelectorAll('input[type="checkbox"]').forEach(K=>K.disabled=!0))),!Tt&&!Nt){const K=L[L.length-1],st=v.nodes.find(ht=>ht.NAME===K);gi(st),di(st.NAME)}R&&R.length>0&&cn(R)});function dt(){it(".animation-container").style("display","none");for(let S=0;S<v.nodes.length;S++){let A=v.nodes[S];const L=Vt.get(A),R=ae.get(A);L.x=A.x,L.y=A.y,R.x=A.x,R.y=A.y}for(let S=0;S<v.links.length;S++){let A=v.links[S];const L=v.nodes.find(Fe=>Fe.id===gt(A)),R=v.nodes.find(Fe=>Fe.id===wt(A)),K=ne.get(A);K.x=L.x,K.y=L.y,K.rotation=Math.atan2(R.y-L.y,R.x-L.x);const st=K.getChildByName("LINE"),ht=Math.max(Math.sqrt((R.x-L.x)**2+(R.y-L.y)**2)-L.radius-R.radius,0);st.width=ht}}}function zs(y){let _=0,$=0,b=0;for(const D of y){let C=ui(D.linkCnt)**2;_+=D.x*C,$+=D.y*C,b+=C}return{x:_/b,y:$/b}}function Ps(){var y=.8;let _;function $(b){const D=ru(_,zs,s),C=b*y;for(const z of _){const{x:H,y:M}=D.get(z.SUBMODULE);z.vx-=(z.x-H)*C,z.vy-=(z.y-M)*C}}return $.initialize=b=>_=b,$.strength=function(b){return arguments.length?(y=+b,$):y},$}function ci(y,_){if(ft.length<2&&(ft.indexOf(y.id)===-1?ft.push(y.id):ft.splice(y.id,1)),pi(ft),ft.length===2){const $=oo(_,ft);Ot=!0,$?(console.log("highlight connections"),cn($)):it(".shortestPath-status").html("No shortest path found. Would you like to try again?"),document.querySelectorAll('input[type="checkbox"]').forEach(b=>b.disabled=!0)}}function js(y,_){yi(y);const $=ar(_,[y],on);cn($),Ft.style("visibility","visible"),Yt=!0}function ce(y,_,$,b,D,C){let z=y.filter(U=>U[b]>D);$&&(z=z.filter(U=>U.type!=="tier1"&&U.type!=="tier2"));const H=z.map(U=>U.id),M=_.filter(U=>yn(H,U));if($===!1){const U=z.filter(I=>C==="Quilt"?I.type==="tier1":I.type==="tier2"),P=[];return M.forEach(I=>{if(C==="Quilt"){const j=P.map(dt=>dt.sourceSubmodule+"_"+dt.targetSubmodule),X=I.sourceSubmodule+"_"+I.targetSubmodule;j.indexOf(X)===-1&&I.sourceSubmodule!==null&&I.targetSubmodule!==null&&P.push({source:"submodule-"+I.sourceSubmodule,target:"submodule-"+I.targetSubmodule,sourceSegment:I.sourceSubmodule,targetSegment:I.targetSubmodule,sourceSubmodule:I.sourceSubmodule,targetSubmodule:I.targetSubmodule,type:"tier1"})}else{const j=P.map(dt=>dt.sourceSubmodule+"_"+dt.sourceSegment+"_"+dt.targetSubmodule+"_"+dt.targetSegment),X=I.sourceSubmodule+"_"+I.sourceSegment+"_"+I.targetSubmodule+"_"+I.targetSegment;j.indexOf(X)===-1&&I.sourceSubmodule!==null&&I.sourceSegment!==null&&I.targetSubmodule!==null&&I.targetSegment!==null&&P.push({source:"segment-"+I.sourceSubmodule+"_"+I.sourceSegment,target:"segment-"+I.targetSubmodule+"_"+I.targetSegment,sourceSegment:I.sourceSegment,targetSegment:I.targetSegment,sourceSubmodule:I.sourceSubmodule,targetSubmodule:I.targetSubmodule,type:"tier2"})}}),{nodes:U,links:P}}return{nodes:z,links:M}}function Qn(y){if(y.type!=="tier1"){if(y.type==="tier2"){const _="submodule-"+y.SUBMODULE;v.nodes=v.nodes.filter(b=>b.SUBMODULE!==y.SUBMODULE),v.links=v.links.filter(b=>b.source.SUBMODULE!==y.SUBMODULE&&b.target.SUBMODULE!==y.SUBMODULE);const $=Be.find(b=>b.id===_);v.nodes.push($),fi(y),W[y.SUBMODULE]=0}if(y.type==="tier3"){const _=qn.filter(M=>M.SUBMODULE===y.SUBMODULE&&M.SEGMENT===y.SEGMENT).map(M=>M.id),$=v.nodes.map(M=>M.id);let b=[];v.links.forEach(M=>{_.indexOf(wt(M))!==-1&&b.push(M),_.indexOf(gt(M))!==-1&&b.push(M),$.indexOf(wt(M))===-1&&b.push(M),$.indexOf(gt(M))===-1&&b.push(M)}),v.nodes=v.nodes.filter(M=>_.indexOf(M.id)===-1),v.links=v.links.filter(M=>b.indexOf(M)===-1);const D=xt.filter(M=>M.sourceSubmodule===y.SUBMODULE&&M.sourceSegment===y.SEGMENT),C=xt.filter(M=>M.targetSubmodule===y.SUBMODULE&&M.targetSegment===y.SEGMENT),z="segment-"+y.SUBMODULE+"_"+y.SEGMENT,H=ee.find(M=>M.id===z);v.nodes.push(H),C.forEach(M=>{const U="segment-"+M.sourceSubmodule+"_"+M.sourceSegment,P="submodule-"+M.sourceSubmodule,I=wt(M);let j={};v.nodes.findIndex(X=>X.id===I)!==-1?j={source:I,target:z}:v.nodes.findIndex(X=>X.id===U)!==-1?j={source:U,target:z}:v.nodes.findIndex(X=>X.id===P)!==-1&&(j={source:P,target:z}),v.links.push(j)}),D.forEach(M=>{const U="segment-"+M.targetSubmodule+"_"+M.targetSegment,P="submodule-"+M.targetSubmodule,I=gt(M);let j={};v.nodes.findIndex(X=>X.id===I)!==-1?j={source:z,target:I}:v.nodes.findIndex(X=>X.id===U)!==-1?j={source:z,target:U}:v.nodes.findIndex(X=>X.id===P)!==-1&&(j={source:z,target:P}),v.links.push(j)}),W[y.SUBMODULE+"_"+y.SEGMENT]=1,W[y.SUBMODULE]=1}cr(v.nodes.map(_=>_.NAME).join("-")),it(".animation-container").style("display","flex"),we()}}function fi(y){const _="submodule-"+y.SUBMODULE,$=xt.filter(D=>D.sourceSubmodule===y.SUBMODULE);xt.filter(D=>D.targetSubmodule===y.SUBMODULE).forEach(D=>{const C="segment-"+D.sourceSubmodule+"_"+D.sourceSegment,z="submodule-"+D.sourceSubmodule,H=wt(D);let M={};v.nodes.findIndex(U=>U.id===H)!==-1?M={source:H,target:_}:v.nodes.findIndex(U=>U.id===C)!==-1?M={source:C,target:_}:v.nodes.findIndex(U=>U.id===z)!==-1&&(M={source:z,target:_}),v.links.push(M)}),$.forEach(D=>{const C="segment-"+D.targetSubmodule+"_"+D.targetSegment,z="submodule-"+D.targetSubmodule,H=gt(D);let M={};v.nodes.findIndex(U=>U.id===H)!==-1?M={source:_,target:H}:v.nodes.findIndex(U=>U.id===C)!==-1?M={source:_,target:C}:v.nodes.findIndex(U=>U.id===z)!==-1&&(M={source:_,target:z}),v.links.push(M)})}function Jn(y){if(y.type!=="tier3"){if(y.type==="tier1"){W[y.SUBMODULE]=0;const _=ee.filter($=>$.SUBMODULE===y.SUBMODULE);_.forEach($=>{W[$.SUBMODULE+"_"+$.SEGMENT]=1}),v.nodes=v.nodes.concat(_),v.nodes=v.nodes.filter($=>$.id!=="submodule-"+y.SUBMODULE),v.links=v.links.filter($=>wt($)!=="submodule-"+y.SUBMODULE&&gt($)!=="submodule-"+y.SUBMODULE),hi(y)}if(y.type==="tier2"){const _=y.id;W[y.SUBMODULE+"_"+y.SEGMENT]=0,v.nodes=v.nodes.filter(C=>C.id!==_&&C.id!=="submodule-"+y.SUBMODULE),v.links=v.links.filter(C=>wt(C)!==_&&gt(C)!==_);const $=qn.filter(C=>C.SUBMODULE===y.SUBMODULE&&C.SEGMENT===y.SEGMENT&&C.type!=="tier1"&&C.type!=="tier2"),D=xt.filter(C=>C.sourceSubmodule===y.SUBMODULE&&C.targetSubmodule===y.SUBMODULE&&C.targetSegment===y.SEGMENT&&C.sourceSegment===y.SEGMENT);v.nodes=v.nodes.concat($),v.links=v.links.concat(D),li(y)}cr(v.nodes.map(_=>_.NAME).join("-")),we()}}function hi(y){const _=xt.filter(D=>D.sourceSubmodule===y.SUBMODULE&&D.targetSubmodule!==y.SUBMODULE),$=xt.filter(D=>D.targetSubmodule===y.SUBMODULE&&D.sourceSubmodule!==y.SUBMODULE);xt.filter(D=>D.targetSubmodule===y.SUBMODULE&&D.sourceSubmodule===y.SUBMODULE).forEach(D=>{v.links.push({source:"segment-"+y.SUBMODULE+"_"+D.sourceSegment,target:"segment-"+y.SUBMODULE+"_"+D.targetSegment})}),_.forEach(D=>{const C="segment-"+y.SUBMODULE+"_"+D.sourceSegment,z="segment-"+D.targetSubmodule+"_"+D.targetSegment,H="submodule-"+D.targetSubmodule,M=gt(D);let U={};v.nodes.findIndex(P=>P.id===z)!==-1?U={source:C,target:z}:v.nodes.findIndex(P=>P.id===H)!==-1?U={source:C,target:H}:v.nodes.findIndex(P=>P.id===M)!==-1&&(U={source:C,target:M}),v.links.push(U)}),$.forEach(D=>{const C="segment-"+y.SUBMODULE+"_"+D.targetSegment,z="segment-"+D.sourceSubmodule+"_"+D.sourceSegment,H="submodule-"+D.sourceSubmodule,M=wt(D);let U={};v.nodes.findIndex(P=>P.id===z)!==-1?U={source:z,target:C}:v.nodes.findIndex(P=>P.id===H)!==-1?U={source:H,target:C}:v.nodes.findIndex(P=>P.id===M)!==-1&&(U={source:M,target:C}),v.links.push(U)})}function li(y){const _=xt.filter(b=>b.sourceSubmodule===y.SUBMODULE&&b.sourceSegment===y.SEGMENT),$=xt.filter(b=>b.targetSubmodule===y.SUBMODULE&&b.targetSegment===y.SEGMENT);_.forEach(b=>{const D=wt(b),C="segment-"+b.targetSubmodule+"_"+b.targetSegment,z="submodule-"+b.targetSubmodule,H=gt(b);let M={};v.nodes.findIndex(U=>U.id===C)!==-1?M={source:D,target:C}:v.nodes.findIndex(U=>U.id===z)!==-1?M={source:D,target:z}:v.nodes.findIndex(U=>U.id===D)!==-1&&v.nodes.findIndex(U=>U.id===H)!==-1&&(M=b),v.links.push(M)}),$.forEach(b=>{const D=gt(b),C="segment-"+b.sourceSubmodule+"_"+b.sourceSegment,z="submodule-"+b.sourceSubmodule,H=wt(b);let M={};v.nodes.findIndex(U=>U.id===C)!==-1?M={source:C,target:D}:v.nodes.findIndex(U=>U.id==z)!==-1?M={source:z,target:D}:v.nodes.findIndex(U=>U.id===H)!==-1&&v.nodes.findIndex(U=>U.id===D)!==-1&&(M=b),v.links.push(M)})}function cn(y){v.nodes.forEach(_=>{const $=Vt.get(_);$.visible=!!be(y,_.id);const b=ae.get(_);b.visible=!!be(y,_.id)}),v.links.forEach(_=>{const $=ne.get(_);$.alpha=yn(y,_)?.7:0}),cr(y.map(_=>_).join("-"))}function di(y){v.nodes.forEach(_=>{const $=Vt.get(_);$.visible=!0,$.alpha=_.NAME===y?1:.2;const b=ae.get(_);b.visible=_.NAME===y}),v.links.forEach(_=>{const $=ne.get(_);$.alpha=.1})}function pi(y){const _=v.nodes.find(b=>b.id===y[0]),$=v.nodes.find(b=>b.id===y[1]);y[0]&&it(".clickedNodes-1").html("Start node: "+(_?_.NAME:"")),y[1]&&it(".clickedNodes-2").html("End node: "+($?$.NAME:"")),y.length>0&&it(".message").style("visibility","visible")}function ve(){v.nodes.forEach(y=>{const _=Vt.get(y);_.alpha=1,_.visible=!be(J,y.id);const $=ae.get(y);$.visible=y.type==="tier1"||y.type==="tier2"}),v.links.forEach(y=>{const _=ne.get(y);_.alpha=v.links.length>200?.3:w}),ot&&(mt.animate({position:new ct.Point(0,0),scaleX:1,scaleY:1,time:1e3}),document.getElementById("search-input").value="",document.getElementById("suggestions-container").innerHTML="",document.getElementById("reset-search").style.display="none",Ft.select(".shortestPath-status").html(""),ot=!1),Yt=!1,Ot=!1,ft=[],Ft.select(".clickedNodes-1").html(""),Ft.select(".clickedNodes-2").html(""),Ft.select(".shortestPath-status").html(""),Ft.style("visibility","hidden"),un.style("visibility","hidden").attr("pointer-events","none"),document.querySelectorAll('input[type="checkbox"]').forEach(y=>y.checked=!1),document.querySelectorAll('input[type="checkbox"]').forEach(y=>y.disabled=!1)}function gi(y){mt.animate({position:new ct.Point(y.x,y.y),scaleX:2,scaleY:2,time:800}),ot=!0}function yi(y){let _=[];_.push(`<div><h3 style='text-align: center'>${y.NAME}</h3></div>`);const $=sn.find(D=>D.NAME===y.NAME);qt.forEach(D=>{_.push(`<div><b>${D}: </b><span>${$[D]}</span></div>`)});let b="";_.map(D=>b+=D),un.html(`${b}`).style("top","150px").style("left","5px").style("visibility","visible")}function Ws(){function y(I,j,X){const dt=document.createElement("button");return dt.textContent=I,X!==6?dt.classList.add("button"):dt.classList.add("button1"),dt.addEventListener("click",j),dt}function _(I){switch(I.target.getAttribute("data-button-id")){case"button1":me=!me,me?(I.target.classList.add("clicked"),v.links.forEach(S=>{const A=ne.get(S);A.getChildByName("ARROW").alpha=1})):(I.target.classList.remove("clicked"),v.links.forEach(S=>{const A=ne.get(S);A.getChildByName("ARROW").alpha=0}));break;case"button2":Nt=!Nt,Nt?I.target.classList.add("clicked"):(I.target.classList.remove("clicked"),ve()),Tt=!1,Yt=!1,document.querySelector('.button[data-button-id="button3"]').classList.remove("clicked");const X=je(v.nodes,v.links);mi(v.nodes,Nt,X);break;case"button3":if(Ot)return;Tt=!Tt,Tt?I.target.classList.add("clicked"):(I.target.classList.remove("clicked"),ve()),Nt=!1,document.querySelector('.button[data-button-id="button2"]').classList.remove("clicked");break;case"button4":if(Ot||ot||Yt)return;Bt=!Bt,W={},Be.map(S=>{W[S.SUBMODULE]=Bt?1:0}),ee.map(S=>{W[S.SUBMODULE+"_"+S.SEGMENT]=Bt?0:1}),Bt?(I.target.classList.add("clicked"),v=ce(t,e,!0,"SUBMODULE",q),we(!0)):(I.target.classList.remove("clicked"),v=ce(t.concat(ee),e,!1,"SUBMODULE",q),we(!0));break;case"button5":if(Ot||ot||Yt)return;if(Ce=!Ce,Ce)I.target.classList.remove("clicked"),v.nodes.forEach(S=>{const A=Vt.get(S);A.visible=!0}),J=[];else{I.target.classList.add("clicked");const S=je(v.nodes,v.links);J=v.nodes.filter(A=>S.degreeWithoutSelfLoops(A.id)===0).map(A=>A.id),v.nodes.forEach(A=>{const L=Vt.get(A);L.visible=!be(J,A.id)})}break;case"button6":ve(),document.querySelectorAll("button").forEach(function(S,A){A!==3&&S.classList.remove("clicked")}),v.links.forEach(S=>{const A=ne.get(S);A.getChildByName("ARROW").alpha=0}),v.nodes.forEach(S=>{const A=Vt.get(S);A.visible=!0,A.alpha=1}),ft=[],Ot=!1,Yt=!1,Bt=!1,me=!1,Tt=!1,Nt=!1,ot=!1,Ce=!0,Oe==="Quilt"&&(v=ce(t.concat(Be),xt,!1,"SUBMODULE",q,"Quilt")),Oe==="Middle"&&(v=ce(t.concat(ee),xt,!1,"SUBMODULE",q)),Oe==="Whole"&&(v=ce(qn,xt,!0,"SUBMODULE",q)),we();break}}const $=document.getElementById("buttonPanel"),b=document.createElement("div"),D=document.createElement("div");$.appendChild(b),$.appendChild(D),["Show directions","Show shortest path","Show neighbors"].forEach((I,j)=>{const X=y(I,_,j+1);X.setAttribute("data-button-id",`button${j+1}`),me&&j===0&&X.classList.add("clicked"),Nt&&j===1&&X.classList.add("clicked"),Tt&&j===2&&X.classList.add("clicked"),Ce&&j===5&&X.classList.add("clicked"),b.appendChild(X)});const C=document.createElement("select");C.id="degreeSelection",b.appendChild(C);const z=[1,2,3];for(var H=0;H<z.length;H++){var M=document.createElement("option");M.value=z[H],M.text=z[H],C.appendChild(M)}document.getElementById("degreeSelection").addEventListener("change",function(){on=document.getElementById("degreeSelection").value;const I=je(v.nodes,v.links),j=ar(I,ft,on);j&&j.length>0&&cn(j)}),["Expanded Graph","Hide Single Nodes","Reset"].forEach((I,j)=>{const X=y(I,_,j+4);X.setAttribute("data-button-id",`button${j+4}`),D.appendChild(X)});const U=document.createElement("select");U.classList.add("default-dd"),U.id="resetSelection",D.appendChild(U);const P=["Quilt","Middle","Whole"];for(var H=0;H<P.length;H++){var M=document.createElement("option");M.value=P[H],M.text=P[H],M.value===Oe&&(M.selected=!0),U.appendChild(M)}document.getElementById("resetSelection").addEventListener("change",function(){Oe=document.getElementById("resetSelection").value})}function mi(y,_,$){$||($=je(v.nodes,v.links));const b=document.getElementById("search-input"),D=document.getElementById("reset-search"),C=document.getElementById("suggestions-container");function z(M){const U={keys:["NAME","DEFINITION"],threshold:.4};return new Ie(y,U).search(M).map(j=>j.item)}function H(M){const U=z(M);C.innerHTML="",U.sort(function(P,I){return P.NAME.toLowerCase().localeCompare(I.NAME.toLowerCase())}),U.forEach(P=>{const I=document.createElement("div");I.classList.add("suggestion"),I.textContent=P.DEFINITION?`${P.NAME} - ${P.DEFINITION}`:P.NAME,I.addEventListener("click",()=>{ot=!0,b.value=P.NAME,C.style.display="none",D.style.display="block",v.nodes.find(j=>j.NAME===P.NAME)?(_?ci(P,$):di(P.NAME),gi(P),document.querySelectorAll('input[type="checkbox"]').forEach(j=>j.disabled=!0)):(it(".message").style("visibility","visible"),it(".shortestPath-status").html("No such node found."))}),C.appendChild(I)}),U.length>0?C.style.display="block":C.style.display="none"}b.addEventListener("input",()=>{yt.alpha(0);const M=b.value;H(M)}),D.addEventListener("click",()=>{ot=!1,b.value="",C.innerHTML="",D.style.display="none",ve()}),document.addEventListener("click",M=>{C.contains(M.target)||(C.style.display="none")})}}function oo(t,e){return td.bidirectional(t,e[0],e[1])}function ar(t,e,n){let r=[];return e.forEach(i=>{Yi(t,i.id?i.id:i,function(o,s,u){u<=n&&r.push(o)},{mode:"outbound"}),Yi(t,i.id?i.id:i,function(o,s,u){u<=n&&r.push(o)},{mode:"inbound"})}),r}function je(t,e){const n=new et;for(let r=0;r<t.length;r++)n.hasNode(t[r].id)||n.addNode(t[r].id);for(let r=0;r<e.length;r++){let i=wt(e[r]),o=gt(e[r]);n.hasNode(i)&&n.hasNode(o)&&(n.hasEdge(i,o)||n.addEdge(i,o))}return n}function cr(t){const e=encodeURIComponent(JSON.stringify(t)),n=`${window.location.pathname}?state=${e}`;window.history.pushState({state:t},"",n)}function fg(t){return t.selectAll("input:checked").data().map(e=>e.id)}function _e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function wt(t){return t.source&&(t.source.id?t.source.id:t.source)}function gt(t){return t.target&&(t.target.id?t.target.id:t.target)}function yn(t,e){return t.indexOf(wt(e))!==-1&&t.indexOf(gt(e))!==-1}function be(t,e){return t.indexOf(e)!==-1}async function hg(){try{const[t,e]=await Promise.all([fetch("/assets/nodes.json"),fetch("/assets/edges.json")]);if(!t.ok||!e.ok)throw new Error(`HTTP error! Status: ${t.status} ${e.status}`);const n=await t.json(),r=await e.json();if(n&&r){const i=["#418BFC","#46BCC8","#D6AB1B","#EB5E68","#B6BE1C","#F64D1A","#BA6DE4","#EA6BCB","#B9AAC8","#F08519"],o=n.map(s=>({NAME:s.NAME,DEFINITION:s.DEFINITION,SUBMODULE:s.SUBMODULE,SUBMODULE_NAME:s["SUBMODULE NAME"],SEGMENT:s.SEGMENT,SEGMENT_NAME:s["SEGMENT NAME"],UNITS:s.UNITS,ReportValue:s.ReportValue,...s}));cg({nodes:o,links:r},{containerSelector:"#app",nodeId:"NAME",sourceId:"UsesVariable",targetId:"Variable",nodeGroup:s=>s.SUBMODULE,nodeTitle:s=>s.NAME,linkStroke:"#fff",nodeStroke:"#000",linkStrokeWidth:.6,linkStroke:"#fff",labelColor:"#fff",labelScale:3,colors:i,width:window.innerWidth,height:window.innerHeight})}else throw new Error("Invalid response format")}catch(t){console.error("Error fetching data:",t)}}hg();
